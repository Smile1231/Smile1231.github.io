<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>JIN MAO &#39;s Blog • Posts by &#34;mybatis&#34; tag</title>
        <link>https://smile1231.github.io</link>
        <description></description>
        <language>en</language>
        <pubDate>Tue, 15 Feb 2022 22:33:42 +0800</pubDate>
        <lastBuildDate>Tue, 15 Feb 2022 22:33:42 +0800</lastBuildDate>
        <category>SAP</category>
        <category>生物信息</category>
        <category>基因编辑</category>
        <category>Java</category>
        <category>Cache</category>
        <category>Cookie</category>
        <category>Session</category>
        <category>Java面试</category>
        <category>Corn</category>
        <category>前端</category>
        <category>Css</category>
        <category>DisPlay属性</category>
        <category>DDD</category>
        <category>领域驱动设计</category>
        <category>Docker</category>
        <category>blog</category>
        <category>hexo</category>
        <category>next</category>
        <category>FastJson</category>
        <category>JavaScript</category>
        <category>Html</category>
        <category>SpringBoot</category>
        <category>IDEA</category>
        <category>Jvm</category>
        <category>Jenkins</category>
        <category>CI/CD</category>
        <category>函数式接口</category>
        <category>map</category>
        <category>Stream流</category>
        <category>Assert</category>
        <category>java</category>
        <category>calender</category>
        <category>Springboot</category>
        <category>Python</category>
        <category>Jupyter</category>
        <category>Machine Learning</category>
        <category>LeetCode</category>
        <category>算法</category>
        <category>递归</category>
        <category>numpy</category>
        <category>pandas</category>
        <category>sklearn</category>
        <category>Linux</category>
        <category>Mybatis</category>
        <category>分页查询</category>
        <category>模糊查询</category>
        <category>Spring</category>
        <category>Nginx</category>
        <category>SrpingBoot</category>
        <category>文件上传</category>
        <category>事务</category>
        <category>master</category>
        <category>TypeScript</category>
        <category>WebPack</category>
        <category>UML</category>
        <category>Groovy</category>
        <category>Ubuntu</category>
        <category>Mysql</category>
        <category>VsCode</category>
        <category>Shell</category>
        <category>VSCODE</category>
        <category>快捷键</category>
        <category>Vue</category>
        <category>Stream</category>
        <category>日期</category>
        <category>线程池</category>
        <category>ubuntu</category>
        <category>虚拟机</category>
        <category>Hadoop</category>
        <category>操作系统</category>
        <category>EasyExcel</category>
        <category>二分查找</category>
        <category>node</category>
        <category>数据挖掘</category>
        <category>JVM</category>
        <category>Yaml</category>
        <category>数据库</category>
        <category>Hexo</category>
        <category>junit</category>
        <category>Mysql事务</category>
        <category>Git</category>
        <category>冒泡排序</category>
        <category>git,npm,node</category>
        <category>动态规划</category>
        <category>堆排序</category>
        <category>多线程</category>
        <category>幂等性</category>
        <category>Google</category>
        <category>流</category>
        <category>快速排序</category>
        <category>正则表达式</category>
        <category>归并排序</category>
        <category>直接插入排序</category>
        <category>选择排序</category>
        <category>Java 面试</category>
        <category>数据结构</category>
        <category>阻塞队列</category>
        <category>Spring事务</category>
        <category>JDK</category>
        <category>动态代理</category>
        <category>Date</category>
        <category>ArrayList</category>
        <category>接口</category>
        <category>SpringMvc</category>
        <category>排序</category>
        <category>执行计划</category>
        <category>HashMap</category>
        <category>设计模式</category>
        <category>cheatsheet</category>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/31d0fffb/</guid>
            <title>Mybatis中#号和$号的区别</title>
            <link>https://smile1231.github.io/posts/31d0fffb/</link>
            <category>Java面试</category>
            <category>Mybatis</category>
            <pubDate>Tue, 15 Feb 2022 22:33:42 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;Mybatis中-号和-号的区别&#34;&gt;&lt;a href=&#34;#Mybatis中-号和-号的区别&#34; class=&#34;headerlink&#34; title=&#34;Mybatis中#号和$号的区别&#34;&gt;&lt;/a&gt;&lt;code&gt;Mybatis&lt;/code&gt;中&lt;code&gt;#&lt;/code&gt;号和&lt;code&gt;$&lt;/code&gt;号的区别&lt;/h1&gt;&lt;h2 id=&#34;默认会用引号将参数引起来&#34;&gt;&lt;a href=&#34;#默认会用引号将参数引起来&#34; class=&#34;headerlink&#34; title=&#34;#{} 默认会用引号将参数引起来&#34;&gt;&lt;/a&gt;&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt; 默认会用引号将参数引起来&lt;/h2&gt;&lt;h2 id=&#34;单纯替代&#34;&gt;&lt;a href=&#34;#单纯替代&#34; class=&#34;headerlink&#34; title=&#34;${}单纯替代&#34;&gt;&lt;/a&gt;&lt;code&gt;$&amp;#123;&amp;#125;&lt;/code&gt;单纯替代&lt;/h2&gt;&lt;p&gt;示例：&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;之前的写法，&lt;code&gt;select * from product_tree_v pv where pv.product_code in(#&amp;#123;product&amp;#125;)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;预编译出来的结果：&lt;code&gt;select * from product_tree_v pv where pv.product_code in ？&lt;/code&gt;;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt;被当作一个占位符了，而参数前后也会被加上引号。&lt;/p&gt;
&lt;p&gt;运行时的&lt;code&gt;sql&lt;/code&gt;是：&lt;code&gt;select * from product_tree_v pv where pv.product_code in(&amp;#39;‘p001&amp;#39;,&amp;#39;p002&amp;#39;,&amp;#39;p003&amp;#39;&amp;#39;)&lt;/code&gt;;&lt;/p&gt;
&lt;p&gt;所以无论如何都是查不到数据的。&lt;/p&gt;
&lt;p&gt;换成&lt;code&gt;$&amp;#123;&amp;#125;&lt;/code&gt;：&lt;code&gt;select * from product_tree_v pv where pv.product_code in($product&amp;#125;)&lt;/code&gt;;&lt;/p&gt;
&lt;p&gt;预编译出来的结果 ：&lt;code&gt;select * from product_tree_v pv where pv.product_code in (‘p001&amp;#39;,&amp;#39;p002&amp;#39;,&amp;#39;p003&amp;#39;)&lt;/code&gt;;&lt;/p&gt;
&lt;p&gt;这样就是纯粹的将参数传进去，没有做任何的转义操作。这才是我们真正想要的。&lt;/p&gt;
&lt;h2 id=&#34;总结&#34;&gt;&lt;a href=&#34;#总结&#34; class=&#34;headerlink&#34; title=&#34;总结&#34;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;&lt;code&gt;mybatis&lt;/code&gt;作为&lt;code&gt;ORM&lt;/code&gt;框架，从性能，系统维护性，实用性上来说，都是非常优秀的，&lt;/p&gt;
&lt;p&gt;其所有的&lt;code&gt;sql&lt;/code&gt;在执行前都会通过数据库驱动进行预编译，这样&lt;code&gt;DBMS&lt;/code&gt;就可以不用编译直接接收参数运行，&lt;/p&gt;
&lt;p&gt;而&lt;code&gt;#&lt;/code&gt;和&lt;code&gt;$&lt;/code&gt;号的区别在预编译后就能看出来了，&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt;预编译完是占位符&lt;code&gt;?&lt;/code&gt;，而&lt;code&gt;$&amp;#123;&amp;#125;&lt;/code&gt;预编译完就是传进来的参数。&lt;/p&gt;
&lt;h2 id=&#34;的优点：&#34;&gt;&lt;a href=&#34;#的优点：&#34; class=&#34;headerlink&#34; title=&#34;#{}的优点：&#34;&gt;&lt;/a&gt;&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt;的优点：&lt;/h2&gt;&lt;p&gt;  使用&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt;可以预防&lt;code&gt;sql&lt;/code&gt;攻击，而&lt;code&gt;$&amp;#123;&amp;#125;&lt;/code&gt;却不能&lt;/p&gt;
&lt;p&gt;例如 &lt;code&gt;select * from $&amp;#123;tablename&amp;#125; &lt;/code&gt;  如果传入的是 &lt;code&gt;product; drop product;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;那么你的表数据就会被无声无息的干掉了。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;$&amp;#123;&amp;#125;&lt;/code&gt;的场景：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;作为&lt;code&gt;in&lt;/code&gt;条件时，&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;参数为&lt;code&gt;int&lt;/code&gt;类型并且数据库中字段的类型是&lt;code&gt;number&lt;/code&gt;，&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;表名&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;order by $&amp;#123;&amp;#125;&lt;/code&gt;，排序字段&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;--------------------------ps----------------------------&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;![CDATA[]]&amp;gt;&lt;/code&gt;的用法，在该符号内的语句，将不会被当成字符串来处理，而是直接当成&lt;code&gt;sql&lt;/code&gt;语句，比如有大于，小于号，要执行一个存储过程都需要加上这个。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/c112412d/</guid>
            <title>Mybatis封装成Map结果</title>
            <link>https://smile1231.github.io/posts/c112412d/</link>
            <category>Java</category>
            <category>SpringBoot</category>
            <category>Mybatis</category>
            <pubDate>Sun, 13 Feb 2022 21:42:17 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;Mybatis封装成Map结果&#34;&gt;&lt;a href=&#34;#Mybatis封装成Map结果&#34; class=&#34;headerlink&#34; title=&#34;Mybatis封装成Map结果&#34;&gt;&lt;/a&gt;&lt;code&gt;Mybatis&lt;/code&gt;封装成&lt;code&gt;Map&lt;/code&gt;结果&lt;/h1&gt;&lt;h2 id=&#34;Dao层&#34;&gt;&lt;a href=&#34;#Dao层&#34; class=&#34;headerlink&#34; title=&#34;Dao层&#34;&gt;&lt;/a&gt;&lt;code&gt;Dao&lt;/code&gt;层&lt;/h2&gt;&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@MapKey(&amp;quot;cityCode&amp;quot;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;Map&amp;lt;String,InvoiceSubjectRuleCity&amp;gt; &lt;span class=&#34;title&#34;&gt;bulkSelectRuleCityByRuleIdList&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;meta&#34;&gt;@Param(&amp;quot;ruleIdList&amp;quot;)&lt;/span&gt; List&amp;lt;Long&amp;gt; ruleIdList)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;bulkSelectRuleCityByRuleIdList&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;resultMap&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;BaseResultMap&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    select&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;refid&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;Base_Column_List&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    from t_invoice_subject_rule_city&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;where&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      rule_id in&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;collection&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;ruleIdList&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;item&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;ruleId&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;open&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;(&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;close&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;)&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;separator&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           #&amp;#123;ruleId&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;foreach&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;where&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;p&gt;返回结果即为&lt;code&gt;Map&lt;/code&gt;类型&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/2edf7887/</guid>
            <title>MybatisPlus实现分页查询</title>
            <link>https://smile1231.github.io/posts/2edf7887/</link>
            <category>Java</category>
            <category>SpringBoot</category>
            <category>Mybatis</category>
            <category>分页查询</category>
            <pubDate>Sun, 13 Feb 2022 21:41:49 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;MybatisPlus实现分页查询&#34;&gt;&lt;a href=&#34;#MybatisPlus实现分页查询&#34; class=&#34;headerlink&#34; title=&#34;MybatisPlus实现分页查询&#34;&gt;&lt;/a&gt;&lt;code&gt;MybatisPlus&lt;/code&gt;实现分页查询&lt;/h1&gt;&lt;h2 id=&#34;分页区别&#34;&gt;&lt;a href=&#34;#分页区别&#34; class=&#34;headerlink&#34; title=&#34;分页区别&#34;&gt;&lt;/a&gt;分页区别&lt;/h2&gt;&lt;p&gt;分页查询每个人程序猿几乎都使用过，但是有部分同学不懂什么是物理分页和逻辑分页。&lt;/p&gt;
&lt;p&gt;物理分页：相当于执行了&lt;code&gt;limit&lt;/code&gt;分页语句，返回部分数据。物理分页只返回部分数据占用内存小，能够获取数据库最新的状态，实施性比较强，一般适用于数据量比较大，数据更新比较频繁的场景。&lt;/p&gt;
&lt;p&gt;逻辑分页：一次性把全部的数据取出来，通过程序进行筛选数据。如果数据量大的情况下会消耗大量的内存，由于逻辑分页只需要读取数据库一次，不能获取数据库最新状态，实施性比较差，适用于数据量小，数据稳定的场合。&lt;/p&gt;
&lt;p&gt;那么MP中的物理分页怎么实现呢？ 往下看往下看&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;h2 id=&#34;配置&#34;&gt;&lt;a href=&#34;#配置&#34; class=&#34;headerlink&#34; title=&#34;配置&#34;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;p&gt;需要新建一个&lt;code&gt;JavaConfig&lt;/code&gt;类&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Configuration&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;MyBatisPlusConfig&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;     * 分页插件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;     * &lt;span class=&#34;doctag&#34;&gt;@return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;     */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Bean&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; PaginationInterceptor &lt;span class=&#34;title&#34;&gt;paginationInterceptor&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; PaginationInterceptor();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;具体分页实现&#34;&gt;&lt;a href=&#34;#具体分页实现&#34; class=&#34;headerlink&#34; title=&#34;具体分页实现&#34;&gt;&lt;/a&gt;具体分页实现&lt;/h2&gt;&lt;p&gt;&lt;code&gt;MP&lt;/code&gt;的&lt;code&gt;Wrapper&lt;/code&gt;提供了两种分页查询的方式，源码如下：&lt;/p&gt;
&lt;img data-src=&#34;/posts/2edf7887/2022-02-13-22-35-05.png&#34; class=&#34;&#34;&gt;

&lt;p&gt;可见两个分页方法参数都是一致的，只是返回参数略有不同，具体选择根据实际业务为准。&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;* 分页查询&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;selectByPage&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    QueryWrapper&amp;lt;User&amp;gt; wrapper = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; QueryWrapper();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    wrapper.like(&lt;span class=&#34;string&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;, &lt;span class=&#34;string&#34;&gt;&amp;quot;雨&amp;quot;&lt;/span&gt;).lt(&lt;span class=&#34;string&#34;&gt;&amp;quot;age&amp;quot;&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;40&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    Page&amp;lt;User&amp;gt; page = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Page&amp;lt;&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;//IPage&amp;lt;User&amp;gt; userIPage = userMapper.selectPage(page, wrapper);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    IPage&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt; mapIPage = userMapper.selectMapsPage(page, wrapper);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;总页数&amp;quot;&lt;/span&gt;+mapIPage.getPages());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;总记录数&amp;quot;&lt;/span&gt;+mapIPage.getTotal());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    List&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt; records = mapIPage.getRecords();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    records.forEach(System.out::println);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以上分页查询执行&lt;code&gt;sql&lt;/code&gt;如下，先是查询了一次总记录数，然后在查询的数据。&lt;/p&gt;
&lt;figure class=&#34;highlight sql&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;DEBUG&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;&amp;gt;&lt;/span&gt;  Preparing: &lt;span class=&#34;keyword&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;COUNT&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;) &lt;span class=&#34;keyword&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;WHERE&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;LIKE&lt;/span&gt; ? &lt;span class=&#34;keyword&#34;&gt;AND&lt;/span&gt; age &lt;span class=&#34;operator&#34;&gt;&amp;lt;&lt;/span&gt; ? &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DEBUG&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;&amp;gt;&lt;/span&gt; Parameters: &lt;span class=&#34;operator&#34;&gt;%&lt;/span&gt;雨&lt;span class=&#34;operator&#34;&gt;%&lt;/span&gt;(String), &lt;span class=&#34;number&#34;&gt;40&lt;/span&gt;(&lt;span class=&#34;type&#34;&gt;Integer&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TRACE&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;    Columns: &lt;span class=&#34;built_in&#34;&gt;COUNT&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TRACE&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;        &lt;span class=&#34;type&#34;&gt;Row&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DEBUG&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;&amp;gt;&lt;/span&gt;  Preparing: &lt;span class=&#34;keyword&#34;&gt;SELECT&lt;/span&gt; id,name,age,email,manager_id,create_time &lt;span class=&#34;keyword&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;WHERE&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;LIKE&lt;/span&gt; ? &lt;span class=&#34;keyword&#34;&gt;AND&lt;/span&gt; age &lt;span class=&#34;operator&#34;&gt;&amp;lt;&lt;/span&gt; ? LIMIT ?,? &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DEBUG&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;&amp;gt;&lt;/span&gt; Parameters: &lt;span class=&#34;operator&#34;&gt;%&lt;/span&gt;雨&lt;span class=&#34;operator&#34;&gt;%&lt;/span&gt;(String), &lt;span class=&#34;number&#34;&gt;40&lt;/span&gt;(&lt;span class=&#34;type&#34;&gt;Integer&lt;/span&gt;), &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;(Long), &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;(Long)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TRACE&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;    Columns: id, name, age, email, manager_id, create_time&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TRACE&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;        &lt;span class=&#34;type&#34;&gt;Row&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, 张雨琪, &lt;span class=&#34;number&#34;&gt;31&lt;/span&gt;, zjq&lt;span class=&#34;variable&#34;&gt;@baomidou&lt;/span&gt;.com, &lt;span class=&#34;number&#34;&gt;1088248166370832385&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;2021&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-01&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-14&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;09&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;15&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TRACE&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;        &lt;span class=&#34;type&#34;&gt;Row&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;, 刘红雨, &lt;span class=&#34;number&#34;&gt;31&lt;/span&gt;, lhm&lt;span class=&#34;variable&#34;&gt;@baomidou&lt;/span&gt;.com, &lt;span class=&#34;number&#34;&gt;1088248166370832385&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;2021&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-01&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-14&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;09&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;48&lt;/span&gt;:&lt;span class=&#34;number&#34;&gt;16&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DEBUG&lt;span class=&#34;operator&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt;      Total: &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;总页数&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;总记录数&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们有需求只要查询数据即可， 不关心总记录数等，如果使用默认的方式就消耗不必要的性能。那么解决办法也是很简单的，只需要在创建&lt;code&gt;page&lt;/code&gt;对象时传入第三个参数为&lt;code&gt;false&lt;/code&gt;即可。&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Page&amp;lt;User&amp;gt; page = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Page&amp;lt;&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;,&lt;span class=&#34;keyword&#34;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;




 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/31dc52e1/</guid>
            <title>MyBatis之分页查询：MyBatis PageHelper</title>
            <link>https://smile1231.github.io/posts/31dc52e1/</link>
            <category>Java</category>
            <category>SpringBoot</category>
            <category>Mybatis</category>
            <category>分页查询</category>
            <pubDate>Sun, 13 Feb 2022 21:40:27 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;MyBatis之分页查询：MyBatis-PageHelper&#34;&gt;&lt;a href=&#34;#MyBatis之分页查询：MyBatis-PageHelper&#34; class=&#34;headerlink&#34; title=&#34;MyBatis之分页查询：MyBatis PageHelper&#34;&gt;&lt;/a&gt;&lt;code&gt;MyBatis&lt;/code&gt;之分页查询：&lt;code&gt;MyBatis PageHelper&lt;/code&gt;&lt;/h1&gt;&lt;h2 id=&#34;1-添加依赖&#34;&gt;&lt;a href=&#34;#1-添加依赖&#34; class=&#34;headerlink&#34; title=&#34;1. 添加依赖&#34;&gt;&lt;/a&gt;1. 添加依赖&lt;/h2&gt;&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;&amp;lt;!--MyBatis 分页插件: MyBatis PageHelper--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.github.pagehelper&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;pagehelper-spring-boot-starter&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.2.5&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;2-添加配置&#34;&gt;&lt;a href=&#34;#2-添加配置&#34; class=&#34;headerlink&#34; title=&#34;2. 添加配置&#34;&gt;&lt;/a&gt;2. 添加配置&lt;/h2&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;p&gt;在&lt;code&gt;application.properties&lt;/code&gt;配置文件中添加&lt;code&gt;MyBatis PageHelper&lt;/code&gt;的配置项&lt;/p&gt;
&lt;figure class=&#34;highlight properties&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# PageHelper 分页插件配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;pagehelper.helperDialect&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;mysql&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;pagehelper.reasonable&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;pagehelper.supportMethodsArguments&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;pagehelper.params&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;count=countSql&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;3-分页查询&#34;&gt;&lt;a href=&#34;#3-分页查询&#34; class=&#34;headerlink&#34; title=&#34;3. 分页查询&#34;&gt;&lt;/a&gt;3. 分页查询&lt;/h2&gt;&lt;p&gt;通过 &lt;code&gt;MyBatis PageHelper&lt;/code&gt; 进行分页查询实际上非常简单，只需在&lt;code&gt;service(或mapper)&lt;/code&gt;方法执行查询前，调用一次 &lt;code&gt;PageHelper.startPage(pageNum,pageSize)&lt;/code&gt; &lt;code&gt;来设置分页查询参数即可，其中pageNum&lt;/code&gt; 为记录页数，&lt;code&gt;pageSize&lt;/code&gt; 为单页记录数量。此时&lt;code&gt;service(或mapper)&lt;/code&gt;方法的查询结果就是分页后的结果了。如果期望获得相关的分页信息，还可以将查询结果封装到&lt;code&gt;PageInfo&lt;/code&gt;对象中，以获得总页数、总记录数、当前页数等相关分页信息&lt;/p&gt;
&lt;p&gt;现在通过一个实际示例，来具体演示操作，这里我们提供了一个分页查询的&lt;code&gt;Controller&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * 分页查询&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * &lt;span class=&#34;doctag&#34;&gt;@param&lt;/span&gt; pageNum 记录页数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * &lt;span class=&#34;doctag&#34;&gt;@param&lt;/span&gt; pageSize 单页记录数量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * &lt;span class=&#34;doctag&#34;&gt;@return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@ResponseBody&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/findPage&amp;quot;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; List&amp;lt;Student&amp;gt; &lt;span class=&#34;title&#34;&gt;findPage&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;meta&#34;&gt;@RequestParam&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; pageNum, &lt;span class=&#34;meta&#34;&gt;@RequestParam&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; pageSize)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 设置分页查询参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    PageHelper.startPage(pageNum,pageSize);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    List&amp;lt;Student&amp;gt; studentList = studentService.findList();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt;(Student student : studentList) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;element : &amp;quot;&lt;/span&gt; + student);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 封装分页查询结果到 PageInfo 对象中以获取相关分页信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    PageInfo pageInfo = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; PageInfo( studentList );&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;总页数: &amp;quot;&lt;/span&gt; + pageInfo.getPages());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;总记录数: &amp;quot;&lt;/span&gt; + pageInfo.getTotal());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;当前页数: &amp;quot;&lt;/span&gt; + pageInfo.getPageNum());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;当前页面记录数量: &amp;quot;&lt;/span&gt; + pageInfo.getSize());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; pageInfo.getList();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;service&lt;/code&gt;方法中所调用的查询&lt;code&gt;SQL&lt;/code&gt;如下所示，可以看到，&lt;code&gt;SQL&lt;/code&gt;中无需使用&lt;code&gt;limit&lt;/code&gt;语句&lt;/p&gt;
&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;resultMap&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;studentResultMap&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;type&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;com.aaron.springbootdemo.pojo.Student&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;property&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;column&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;jdbcType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;INTEGER&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;property&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;username&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;column&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;username&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;jdbcType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;VARCHAR&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;property&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;sex&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;column&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;sex&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;jdbcType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;VARCHAR&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;property&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;address&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;column&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;address&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;jdbcType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;VARCHAR&amp;quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;resultMap&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;findList&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;parameterType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;String&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;resultMap&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;studentResultMap&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    SELECT * FROM user&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;NOTE:&lt;/code&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;PageHelper.startPage(pageNum,pageSize)&lt;/code&gt; 只对其后的第一次&lt;code&gt;SQL&lt;/code&gt;查询进行分页。故若需进行分页查询，必须每次在&lt;code&gt;service（或mapper）&lt;/code&gt;方法执行&lt;code&gt;SQL&lt;/code&gt;查询前调用&lt;code&gt;PageHelper.startPage(pageNum,pageSize) &lt;/code&gt;方法&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/105c245f/</guid>
            <title>Mybatis使用Sql进行模糊查询</title>
            <link>https://smile1231.github.io/posts/105c245f/</link>
            <category>Java</category>
            <category>SpringBoot</category>
            <category>Mybatis</category>
            <category>模糊查询</category>
            <pubDate>Sun, 13 Feb 2022 21:39:52 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;Mybatis使用Sql进行模糊查询&#34;&gt;&lt;a href=&#34;#Mybatis使用Sql进行模糊查询&#34; class=&#34;headerlink&#34; title=&#34;Mybatis使用Sql进行模糊查询&#34;&gt;&lt;/a&gt;&lt;code&gt;Mybatis&lt;/code&gt;使用&lt;code&gt;Sql&lt;/code&gt;进行模糊查询&lt;/h1&gt;&lt;h2 id=&#34;方式一&#34;&gt;&lt;a href=&#34;#方式一&#34; class=&#34;headerlink&#34; title=&#34;方式一&#34;&gt;&lt;/a&gt;方式一&lt;/h2&gt;&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;&amp;lt;!-- 根据名称模糊查询 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;findByName&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;resultType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;com.sc.domain.User&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;parameterType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;String&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    select * from user where username like #&amp;#123;username&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;模糊查询的测试方法&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;

&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;List&amp;lt;User&amp;gt; users = userDao.findByName(&lt;span class=&#34;string&#34;&gt;&amp;quot;%王%&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;img data-src=&#34;/posts/105c245f/2022-02-13-22-29-15.png&#34; class=&#34;&#34;&gt;

&lt;p&gt;我们在配置文件中没有加入&lt;code&gt;%&lt;/code&gt;来作为模糊查询的条件，所以在传入字符串实参时，就需要给定模糊查询的标&lt;br&gt;识%。配置文件中的&lt;code&gt;#&amp;#123;username&amp;#125;&lt;/code&gt;也只是一个占位符，所以 &lt;code&gt;SQL&lt;/code&gt; 语句显示为&lt;code&gt;“？”&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&#34;方式二&#34;&gt;&lt;a href=&#34;#方式二&#34; class=&#34;headerlink&#34; title=&#34;方式二&#34;&gt;&lt;/a&gt;方式二&lt;/h2&gt;&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;findByName&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;parameterType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;string&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;resultType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;com.sc.domain.User&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; select * from user where username like &amp;#x27;%$&amp;#123;value&amp;#125;%&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们在上面将原来的&lt;code&gt;#&amp;#123;&amp;#125;&lt;/code&gt;占位符，改成了&lt;code&gt;&amp;#123;value&amp;#125;&lt;/code&gt;。注意如果用模糊查询的这种写法，那么&lt;code&gt;$&amp;#123;value&amp;#125;&lt;/code&gt;的写法就是固定的，不能写成其它名字。&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//执行查询一个方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;List&amp;lt;User&amp;gt; users = userDao.findByName(&lt;span class=&#34;string&#34;&gt;&amp;quot;王&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;img data-src=&#34;/posts/105c245f/2022-02-13-22-29-25.png&#34; class=&#34;&#34;&gt;

&lt;p&gt;可以发现，我们在程序代码中就不需要加入模糊查询的匹配符%了，这两种方式的实现效果是一样的，但执行&lt;br&gt;的语句是不一样的。&lt;/p&gt;
&lt;h2 id=&#34;方式三&#34;&gt;&lt;a href=&#34;#方式三&#34; class=&#34;headerlink&#34; title=&#34;方式三&#34;&gt;&lt;/a&gt;方式三&lt;/h2&gt;&lt;p&gt;说明：通过前两种写法，虽然可以解决模糊查询的问题，但是还是不好，因为通过&lt;code&gt;%&lt;/code&gt;的方式会引发&lt;code&gt;sql&lt;/code&gt;注入的问题，现在的期望是：既能够解决&lt;code&gt;sql&lt;/code&gt;注入又能在配置文件中写&lt;code&gt;%&lt;/code&gt;该如何实现呢，可以借助&lt;code&gt;mysql&lt;/code&gt;的函数。&lt;/p&gt;
&lt;p&gt;修改 &lt;code&gt;SQL&lt;/code&gt; 语句的配置，配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;id&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;findByName&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;parameterType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;string&amp;quot;&lt;/span&gt; &lt;span class=&#34;attr&#34;&gt;resultType&lt;/span&gt;=&lt;span class=&#34;string&#34;&gt;&amp;quot;com.sc.domain.User&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; select * from user where username like concat(&amp;#x27;%&amp;#x27;,#&amp;#123;username&amp;#125;,&amp;#x27;%&amp;#x27;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;*#&amp;#123; &amp;#125;&lt;/code&gt;是预编译处理，&lt;code&gt;MyBatis&lt;/code&gt;在处理&lt;code&gt;#&amp;#123; &amp;#125;&lt;/code&gt;时，它会将&lt;code&gt;sql&lt;/code&gt;中的&lt;code&gt;#&amp;#123; &amp;#125;&lt;/code&gt;替换为&lt;code&gt;？&lt;/code&gt;，然后调用&lt;code&gt;PreparedStatement&lt;/code&gt;的&lt;code&gt;set&lt;/code&gt;方法来赋值，传入字符串后，会在值两边加上单引号，使用占位符的方式提高效率，可以防止&lt;code&gt;sql&lt;/code&gt;注入。&lt;br&gt;&lt;code&gt;$&amp;#123;&amp;#125;:&lt;/code&gt;表示拼接&lt;code&gt;sql&lt;/code&gt;串，将接收到参数的内容不加任何修饰拼接在&lt;code&gt;sql&lt;/code&gt;中，可能引发&lt;code&gt;sql&lt;/code&gt;注入。&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://smile1231.github.io/posts/9aff665a/</guid>
            <title>mybatis中大于等于小于等于的写法</title>
            <link>https://smile1231.github.io/posts/9aff665a/</link>
            <category>Java</category>
            <category>Mybatis</category>
            <pubDate>Thu, 16 Dec 2021 19:39:45 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;mybatis中大于等于小于等于的写法&#34;&gt;&lt;a href=&#34;#mybatis中大于等于小于等于的写法&#34; class=&#34;headerlink&#34; title=&#34;mybatis中大于等于小于等于的写法&#34;&gt;&lt;/a&gt;&lt;code&gt;mybatis&lt;/code&gt;中大于等于小于等于的写法&lt;/h2&gt;&lt;figure class=&#34;highlight xml&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;第一种写法（1）：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;原符号       &amp;lt;        &amp;lt;=      &amp;gt;       &amp;gt;=       &amp;amp;        &amp;#x27;        &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;替换符号    &lt;span class=&#34;symbol&#34;&gt;&amp;amp;lt;&lt;/span&gt;    &lt;span class=&#34;symbol&#34;&gt;&amp;amp;lt;&lt;/span&gt;=   &lt;span class=&#34;symbol&#34;&gt;&amp;amp;gt;&lt;/span&gt;    &lt;span class=&#34;symbol&#34;&gt;&amp;amp;gt;&lt;/span&gt;=   &lt;span class=&#34;symbol&#34;&gt;&amp;amp;amp;&lt;/span&gt;   &lt;span class=&#34;symbol&#34;&gt;&amp;amp;apos;&lt;/span&gt;  &lt;span class=&#34;symbol&#34;&gt;&amp;amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;例如：sql如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;create_date_time &lt;span class=&#34;symbol&#34;&gt;&amp;amp;gt;&lt;/span&gt;= #&amp;#123;startTime&amp;#125; and  create_date_time &lt;span class=&#34;symbol&#34;&gt;&amp;amp;lt;&lt;/span&gt;= #&amp;#123;endTime&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;第二种写法（2）：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;大于等于&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;![CDATA[ &amp;gt;= ]]&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;小于等于&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;![CDATA[ &amp;lt;= ]]&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;例如：sql如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;create_date_time &amp;lt;![CDATA[ &amp;gt;= ]]&amp;gt; #&amp;#123;startTime&amp;#125; and  create_date_time &amp;lt;![CDATA[ &amp;lt;= ]]&amp;gt; #&amp;#123;endTime&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

 ]]></description>
        </item>
    </channel>
</rss>

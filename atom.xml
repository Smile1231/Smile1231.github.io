<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>JIN MAO &#39;s Blog</title>
  
  <subtitle>got windy(起风了)</subtitle>
  <link href="https://smile1231.github.io/atom.xml" rel="self"/>
  
  <link href="https://smile1231.github.io/"/>
  <updated>2022-07-08T02:35:11.110Z</updated>
  <id>https://smile1231.github.io/</id>
  
  <author>
    <name>JIN Mao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于hexo使用shoka主题注意点</title>
    <link href="https://smile1231.github.io/posts/66edb7d2/"/>
    <id>https://smile1231.github.io/posts/66edb7d2/</id>
    <published>2022-07-08T01:57:07.000Z</published>
    <updated>2022-07-08T02:35:11.110Z</updated>
    
    <content type="html"><![CDATA[<p>最近发现了一个特比好看的主题，叫 <code>shaoka</code> , <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">github 地址</span> , 效果图不出意外的话应该就是我现在使用的这个<code>theme</code>了，同时博主也很贴心了贴了一些简单的<a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/dependents/"><code>wiki</code>文档</a>, <span class="exturl" data-url="aHR0cHM6Ly93d3cucmV2ZXJzZXNhY2xlLmNvbS9IZXhvLVNob2thJUU0JUI4JUJCJUU5JUEyJTk4JUU1JThBJTlGJUU4JTgzJUJEJUU0JUJCJThCJUU3JUJCJThEJUU4JUExJUE1JUU1JTg1JTg1JUU3JTgyJUI5Lw==">补充功能介绍点</span></p><p>可能我这个主题还是会有一点问题，目前有的大坑的话就是关于界面搜索功能的失效，参照上面的补充功能介绍点注册一个<a href="https://www.algolia.com/"><code>algolia</code></a>.</p><p>需要注意的是，在<code>root</code>的<code>_config.yml</code>文件中需要输入一些配置信息,由于我之前<code>appId</code>一直写的是<code>applicaitonId</code>, 因为有些博客是这个，可能是老版本吧。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia:</span></span><br><span class="line">   <span class="attr">appId:</span> <span class="string">&quot;Application ID对应码&quot;</span></span><br><span class="line">   <span class="attr">apiKey:</span> <span class="string">&quot;API Keys页面的All API Keys中刚刚新建的API key的对应码&quot;</span></span><br><span class="line">   <span class="attr">adminApiKey:</span> <span class="string">&quot;Admin API Key对应码&quot;</span></span><br><span class="line">   <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br><span class="line">   <span class="attr">indexName:</span> <span class="string">&quot;你填写的Indices部分&quot;</span></span><br><span class="line">   <span class="attr">fields:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">title</span> <span class="comment">#必须配置</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">path</span> <span class="comment">#必须配置</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">categories</span> <span class="comment">#推荐配置</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">content:strip:truncate,0,4000</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">gallery</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">photos</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">tags</span></span><br></pre></td></tr></table></figure><p>在<code>theme</code>的<code>_config.yml</code>文件中,加入或者修改以下配置,目前版本的<code>search</code>如果不配置，会报一个<code>hits</code>的错误</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="comment"># For more information: https://www.algolia.com</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Something</span> </span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span> <span class="comment"># if there are no result</span></span><br><span class="line">    <span class="attr">hits_stats:</span> <span class="string">&quot;$&#123;hits&#125; results found in $&#123;time&#125; ms&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近发现了一个特比好看的主题，叫 &lt;code&gt;shaoka&lt;/code&gt; , &lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==&quot;&gt;githu</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://smile1231.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot如何优雅的发邮件</title>
    <link href="https://smile1231.github.io/posts/ac1ae082/"/>
    <id>https://smile1231.github.io/posts/ac1ae082/</id>
    <published>2022-07-05T15:45:58.000Z</published>
    <updated>2022-07-06T13:58:07.774Z</updated>
    
    <content type="html"><![CDATA[<p>这里演示使用<code>163</code>邮箱发邮件</p><h2 id="注册163，并打开配置"><a href="#注册163，并打开配置" class="headerlink" title="注册163，并打开配置"></a>注册<code>163</code>，并打开配置</h2><p>记得保存授权吗</p><img data-src="/posts/ac1ae082/2022-07-06-21-58-05.png" class=""><span id="more"></span><h2 id="增加maven以来"><a href="#增加maven以来" class="headerlink" title="增加maven以来"></a>增加<code>maven</code>以来</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- send email --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="yaml文件配置"><a href="#yaml文件配置" class="headerlink" title="yaml文件配置"></a><code>yaml</code>文件配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.163.com</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">********</span> <span class="comment">#登陆账号</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">********</span> <span class="comment">#登陆密码（或授权码），开启上面配置时会有</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">from:</span> <span class="string">JinMaoToRich@163.com</span> <span class="comment">#邮件发信人（即真实邮箱）</span></span><br></pre></td></tr></table></figure><h2 id="Java代码"><a href="#Java代码" class="headerlink" title="Java代码"></a><code>Java</code>代码</h2><p>实体类代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendEmailRecord</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 主键</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 邮件发送人</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String from;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 邮件接受人</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String to;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 邮件主题</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String subject;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 邮件内容</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String text;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 抄送</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String cc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 密送</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String bcc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 0 - ok , 1 - fail</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> Byte status;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 报错信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String error;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 发送时间</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> Date sendDate;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 计算文件夹路径</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">private</span> String computationDirectory;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 邮件附件</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="meta">@JsonIgnore</span></span><br><span class="line"><span class="keyword">private</span> List&lt;File&gt; fileList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>发送邮件代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendMailService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSenderImpl mailSender;<span class="comment">//注入邮件工具类</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SendEmailRecordDao sendEmailRecordDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ShellProperties shellProperties;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendMailWithAttach</span><span class="params">(SendEmailRecord sendEmailInfo)</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start to send email to &#123;&#125;&quot;</span>,sendEmailInfo.getTo());</span><br><span class="line">        MimeMessageHelper messageHelper = <span class="keyword">new</span> MimeMessageHelper(mailSender.createMimeMessage(), <span class="keyword">true</span>);<span class="comment">//true表示支持复杂类型</span></span><br><span class="line">        sendEmailInfo.setFrom(getMailSendFrom());<span class="comment">//邮件发信人从配置项读取</span></span><br><span class="line">        messageHelper.setFrom(sendEmailInfo.getFrom());<span class="comment">//邮件发信人</span></span><br><span class="line">        messageHelper.setTo(sendEmailInfo.getTo().split(<span class="string">&quot;,&quot;</span>));<span class="comment">//邮件收信人</span></span><br><span class="line">        messageHelper.setSubject(sendEmailInfo.getSubject());<span class="comment">//邮件主题</span></span><br><span class="line">        messageHelper.setText(sendEmailInfo.getText());<span class="comment">//邮件内容</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(sendEmailInfo.getCc())) &#123;<span class="comment">//抄送</span></span><br><span class="line">            messageHelper.setCc(sendEmailInfo.getCc().split(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(sendEmailInfo.getBcc())) &#123;<span class="comment">//密送</span></span><br><span class="line">            messageHelper.setCc(sendEmailInfo.getBcc().split(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (CollUtil.isNotEmpty(sendEmailInfo.getFileList())) &#123;<span class="comment">//添加邮件附件</span></span><br><span class="line">            <span class="keyword">for</span> (File file : sendEmailInfo.getFileList()) &#123;</span><br><span class="line">                messageHelper.addAttachment(file.getName(),file);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mailSender.send(messageHelper.getMimeMessage());<span class="comment">//正式发送邮件</span></span><br><span class="line">        sendEmailInfo.setStatus(SendMailStatusEnum.OK.getCode());</span><br><span class="line">        log.info(<span class="string">&quot;Send Email Success ：&#123;&#125;-&gt;&#123;&#125;&quot;</span>, sendEmailInfo.getFrom(), sendEmailInfo.getTo());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;send Email failed , error is &#123;&#125;&quot;</span>,e.getMessage());</span><br><span class="line">        sendEmailInfo.setStatus(SendMailStatusEnum.FAILED.getCode());</span><br><span class="line">        sendEmailInfo.setError(e.getMessage());</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        saveMail(sendEmailInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存邮件</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveMail</span><span class="params">(SendEmailRecord emailInfo)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;start save send email record to database.&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (Objects.equals(emailInfo.getTo(),shellProperties.getAlarmEmail()))&#123;</span><br><span class="line">        log.info(<span class="string">&quot;this is alarm email , email info is &#123;&#125;&quot;</span>,emailInfo);</span><br><span class="line">        emailInfo.setStatus(SendMailStatusEnum.FAILED.getCode());</span><br><span class="line">    &#125;</span><br><span class="line">    sendEmailRecordDao.insertSelective(emailInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取邮件发信人</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getMailSendFrom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mailSender.getJavaMailProperties().getProperty(<span class="string">&quot;from&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;这里演示使用&lt;code&gt;163&lt;/code&gt;邮箱发邮件&lt;/p&gt;
&lt;h2 id=&quot;注册163，并打开配置&quot;&gt;&lt;a href=&quot;#注册163，并打开配置&quot; class=&quot;headerlink&quot; title=&quot;注册163，并打开配置&quot;&gt;&lt;/a&gt;注册&lt;code&gt;163&lt;/code&gt;，并打开配置&lt;/h2&gt;&lt;p&gt;记得保存授权吗&lt;/p&gt;
&lt;img src=&quot;/posts/ac1ae082/2022-07-06-21-58-05.png&quot; class=&quot;&quot;&gt;</summary>
    
    
    
    
    <category term="SrpingBoot" scheme="https://smile1231.github.io/tags/SrpingBoot/"/>
    
  </entry>
  
  <entry>
    <title>Nginx踩坑之解决前后端跨域</title>
    <link href="https://smile1231.github.io/posts/7874a051/"/>
    <id>https://smile1231.github.io/posts/7874a051/</id>
    <published>2022-07-05T15:17:40.000Z</published>
    <updated>2022-07-05T15:46:09.965Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nginx配置前端跨域"><a href="#nginx配置前端跨域" class="headerlink" title="nginx配置前端跨域"></a><code>nginx</code>配置前端跨域</h2><p>注意点： 如果使用<code>nginx</code>解决跨域在前端使用<code>axios</code>是不需要写后端全路径的，类似于：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  原来我们需要写</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">&#x27;http://localhost:9999/api&#x27;</span></span><br><span class="line"><span class="comment">// 现在改为</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">&#x27;/api&#x27;</span></span><br></pre></td></tr></table></figure><p>这边不改动</p><span id="more"></span><img data-src="/posts/7874a051/2022-07-05-23-34-01.png" class=""><p>因为如果使用了<code>Nginx</code>反向代理之后，部署服务器会有跨域的问题，如果仅仅只是后端处理，也不一定能行, 需要在配置文件中进行代理,<code>docker</code>中文件位置：</p><img data-src="/posts/7874a051/2022-07-05-23-39-51.png" class=""><img data-src="/posts/7874a051/2022-07-05-23-40-29.png" class=""><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!--</span> <span class="string">解决跨域代理 --&gt;</span></span><br><span class="line"><span class="attr">location</span> <span class="string">/api/ &#123;</span></span><br><span class="line"><span class="attr">proxy_pass</span> <span class="string">http://58.198.178.163:9999/api/;</span></span><br><span class="line"><span class="attr">client_max_body_size</span> <span class="string">1024m;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="meta">&lt;!--</span> <span class="string">解决404 --&gt;</span></span><br><span class="line"><span class="attr">error_page</span>  <span class="string">404              index.html;</span></span><br></pre></td></tr></table></figure><p><strong>Tips：此处一定要注意的是，<code>proxy_pass</code> 所对应的地址一定要是真实<code>ip</code>，要不然就回报<code>502</code>错误，真的是个大坑，也是我自己的问题！！！</strong>： </p><h2 id="Nginx与Vue打包成镜像"><a href="#Nginx与Vue打包成镜像" class="headerlink" title="Nginx与Vue打包成镜像"></a><code>Nginx</code>与<code>Vue</code>打包成镜像</h2><blockquote><p><code>npm run build</code>打包,生成<code>dist</code>文件夹</p></blockquote><blockquote><p>在<code>dist</code>统计目录下，<code>vim Dockerfile</code>,在其中输入</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">COPY /dist /usr/share/nginx/html</span><br><span class="line"></span><br><span class="line">ENTRYPOINT nginx -g <span class="string">&quot;daemon off;&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>打包命令:</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &lt;image_name&gt; .</span><br></pre></td></tr></table></figure><blockquote><p>查看镜像 ： <code>docker images</code></p></blockquote><blockquote><p>运行： <code>docker run -d --name nginx_vue -p 8888:80 &lt;image_name&gt;</code></p></blockquote><blockquote><p>进入容器：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it nginx_vue /bin/bash</span><br></pre></td></tr></table></figure><blockquote><p><code>nginx</code>配置文件地址 <code>/etc/nginx/conf.d/default.conf</code></p></blockquote><h2 id="Nginx修改上传文件大小"><a href="#Nginx修改上传文件大小" class="headerlink" title="Nginx修改上传文件大小"></a><code>Nginx</code>修改上传文件大小</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">client_max_body_size</span>    <span class="string">1000m;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;nginx配置前端跨域&quot;&gt;&lt;a href=&quot;#nginx配置前端跨域&quot; class=&quot;headerlink&quot; title=&quot;nginx配置前端跨域&quot;&gt;&lt;/a&gt;&lt;code&gt;nginx&lt;/code&gt;配置前端跨域&lt;/h2&gt;&lt;p&gt;注意点： 如果使用&lt;code&gt;nginx&lt;/code&gt;解决跨域在前端使用&lt;code&gt;axios&lt;/code&gt;是不需要写后端全路径的，类似于：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  原来我们需要写&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;axios.defaults.baseURL = &lt;span class=&quot;string&quot;&gt;&amp;#x27;http://localhost:9999/api&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 现在改为&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;axios.defaults.baseURL = &lt;span class=&quot;string&quot;&gt;&amp;#x27;/api&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这边不改动&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
    <category term="Nginx" scheme="https://smile1231.github.io/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Springboot优雅的实现重试</title>
    <link href="https://smile1231.github.io/posts/49a9ac1a/"/>
    <id>https://smile1231.github.io/posts/49a9ac1a/</id>
    <published>2022-07-05T14:49:37.000Z</published>
    <updated>2022-07-05T15:46:35.201Z</updated>
    
    <content type="html"><![CDATA[<p><code>guava-retrying</code> 包有一个重试工具，这便是重试示例代码，同时，参考文章有 <span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNzUyMDg2">https://cloud.tencent.com/developer/article/1752086</span></p><p>引入<code>maven</code>包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.rholder<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava-retrying<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>封装为工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RetryUtil</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">RetryUtil</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Retryer&lt;Boolean&gt; retryer = RetryerBuilder.&lt;Boolean&gt;newBuilder()</span><br><span class="line">        <span class="comment">//重试条件</span></span><br><span class="line">        .retryIfResult(aBoolean -&gt; Objects.equals(aBoolean,<span class="keyword">false</span>))</span><br><span class="line">        <span class="comment">//等待策略，此处为120秒重试一次</span></span><br><span class="line">        .withWaitStrategy(WaitStrategies.fixedWait(<span class="number">150</span>, TimeUnit.SECONDS))</span><br><span class="line">        <span class="comment">//停止策略，此处只重试10次</span></span><br><span class="line">        .withStopStrategy(StopStrategies.stopAfterAttempt(<span class="number">10</span>))</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">测试</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">context</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, RetryException </span>&#123;</span><br><span class="line">        AtomicInteger j = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">        RetryUtil.retryer.call(() -&gt; &#123;</span><br><span class="line">            log.info(<span class="string">&quot;start &#123;&#125; calculate&quot;</span>,j.get());</span><br><span class="line">           <span class="keyword">int</span> i = j.get();</span><br><span class="line">           <span class="keyword">if</span> (i &lt; <span class="number">8</span>)&#123;</span><br><span class="line">               j.getAndIncrement();</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img data-src="/posts/49a9ac1a/2022-07-05-23-14-13.png" class="">]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;guava-retrying&lt;/code&gt; 包有一个重试工具，这便是重试示例代码，同时，参考文章有 &lt;a href=&quot;https://cloud.tencent.com/developer/article/1752086&quot;&gt;https://cloud.tencent.com/developer/article/1752086&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;引入&lt;code&gt;maven&lt;/code&gt;包&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.github.rholder&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;guava-retrying&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;2.0.0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>JAVA-jar包运行及日志输出</title>
    <link href="https://smile1231.github.io/posts/f35c5140/"/>
    <id>https://smile1231.github.io/posts/f35c5140/</id>
    <published>2022-07-05T14:01:26.000Z</published>
    <updated>2022-07-05T15:40:39.946Z</updated>
    
    <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbHNoLWFkbWluL3AvMTUzNDUxNzYuaHRtbA==">原文地址</span></p><p>一般情况下运行jar包，当前是可运行的jar包，直接命令</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar common.jar </span><br></pre></td></tr></table></figure><p>按下<code>ctrl+C</code> ，关闭当前<code>ssh</code>或者直接关闭窗口，当前程序都会退出。</p><span id="more"></span><p>我们在命令的结尾添加 <code>“&amp;”</code> ，&amp;表示该程序可以在后台执行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar common.jar &amp;</span><br></pre></td></tr></table></figure><p> 但是在当窗口关闭时，程序也会中止运行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common.jar &amp;</span><br></pre></td></tr></table></figure><p>命令最前面个<code>nohub</code>关键字，这样程序就会不挂断运行命令, 当ssh终端关闭时,程序仍然在运行，当前程序的日志会被写入到当前目录的<code>nohup.out</code>文件中</p><p>我们可以改下输入的日志文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common.jar &gt; log.out &amp;</span><br></pre></td></tr></table></figure><p>当前程序的日志会被写入到当前目录的<code>log.out</code>文件中</p><p>如果不想写日志，可以将日志重定向到 <code>/dev/null</code> 中，<code>/dev/null</code>代表<code>linux</code>的空设备文件，所有往这个文件里面写入的内容都会丢失</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common.jar &gt; /dev/<span class="keyword">null</span> &amp;</span><br></pre></td></tr></table></figure><p>标准输出就会不再存在，没有任何地方能够找到输出的内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common-api.jar &gt;/dev/<span class="keyword">null</span> <span class="number">2</span>&gt;log.error &amp; </span><br></pre></td></tr></table></figure><p>只输出错误信息到日志文件，标准输出不写入日志文件，直接丢弃</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common-api.jar &gt;/dev/<span class="keyword">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp; </span><br></pre></td></tr></table></figure><p>标准输出<code>(stdout)</code>重定向到<code>/dev/null</code>中（丢弃标准输出），然后标准错误输出<code>(stderror)</code>由于重用了标准输出的描述符，所以标准错误输出也被定向到了<code>/dev/null</code>中，错误输出同样也被丢弃了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common-api.jar &gt;log.out <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp; </span><br></pre></td></tr></table></figure><p>标准输出重定向到<code>log.out</code>中，然后错误输出由于重用了标准输出的描述符，所以错误输出也被定向到了<code>log.out</code>中 </p><p>但是不管那种情况，如果日志输出，日志文件都会增加很快，造成单个文件很大。所以需要拆分文件</p><ol><li><p>定时作业，每天将日志文件复制一份，然后将当前的日志文件清空。</p></li><li><p>借助 <code>cronolog</code>来分隔日志</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar common-api.jar | /usr/local/cronolog/sbin/cronolog logs/console-%Y-%m-%d.out &amp;</span><br></pre></td></tr></table></figure><p>这样每天会产生一个<code>console</code>开头的日志文件。</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/lsh-admin/p/15345176.html&quot;&gt;原文地址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一般情况下运行jar包，当前是可运行的jar包，直接命令&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java -jar common.jar &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;按下&lt;code&gt;ctrl+C&lt;/code&gt; ，关闭当前&lt;code&gt;ssh&lt;/code&gt;或者直接关闭窗口，当前程序都会退出。&lt;/p&gt;</summary>
    
    
    
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>VsCode 如何Debug Shell</title>
    <link href="https://smile1231.github.io/posts/823298d2/"/>
    <id>https://smile1231.github.io/posts/823298d2/</id>
    <published>2022-07-01T02:58:13.000Z</published>
    <updated>2022-07-02T03:05:50.261Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-下载Vscode插件-Bash-Debug"><a href="#1-下载Vscode插件-Bash-Debug" class="headerlink" title="1. 下载Vscode插件 Bash Debug"></a>1. 下载<code>Vscode</code>插件 <code>Bash Debug</code></h2><img data-src="/posts/823298d2/2022-07-01-10-59-08.png" class=""><span id="more"></span><h2 id="2-create-launch-json-file"><a href="#2-create-launch-json-file" class="headerlink" title="2. create launch.json file"></a>2. <code>create launch.json file</code></h2><p>选择<code>Bash Debug</code></p><img data-src="/posts/823298d2/2022-07-01-11-04-35.png" class=""><h2 id="3-添加配置"><a href="#3-添加配置" class="headerlink" title="3. 添加配置"></a>3. 添加配置</h2><img data-src="/posts/823298d2/2022-07-01-11-06-45.png" class=""><img data-src="/posts/823298d2/2022-07-01-11-07-31.png" class=""><p>使用下拉菜单选中刚刚我们添加的 <code>select script from list of sh files</code>，点击播放键运行。</p><p>选择想<code>debug</code>的脚本，然后开始</p><h2 id="4-查看变量名"><a href="#4-查看变量名" class="headerlink" title="4. 查看变量名"></a>4. 查看变量名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;变量名&#125;</span></span><br><span class="line"><span class="comment"># 格式来添加，要确认哪个就添加哪个。</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-下载Vscode插件-Bash-Debug&quot;&gt;&lt;a href=&quot;#1-下载Vscode插件-Bash-Debug&quot; class=&quot;headerlink&quot; title=&quot;1. 下载Vscode插件 Bash Debug&quot;&gt;&lt;/a&gt;1. 下载&lt;code&gt;Vscode&lt;/code&gt;插件 &lt;code&gt;Bash Debug&lt;/code&gt;&lt;/h2&gt;&lt;img src=&quot;/posts/823298d2/2022-07-01-10-59-08.png&quot; class=&quot;&quot;&gt;</summary>
    
    
    
    
    <category term="VsCode" scheme="https://smile1231.github.io/tags/VsCode/"/>
    
    <category term="Shell" scheme="https://smile1231.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>Docker指令以及部署</title>
    <link href="https://smile1231.github.io/posts/11faeb76/"/>
    <id>https://smile1231.github.io/posts/11faeb76/</id>
    <published>2022-06-30T13:30:40.000Z</published>
    <updated>2022-07-02T05:39:15.741Z</updated>
    
    <content type="html"><![CDATA[<p>文档地址：<span class="exturl" data-url="aHR0cHM6Ly95ZWFzeS5naXRib29rLmlvL2RvY2tlcl9wcmFjdGljZS8=">https://yeasy.gitbook.io/docker_practice/</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=">Docker hub</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGwv">Docker Install</span></p><h2 id="列出所有镜像"><a href="#列出所有镜像" class="headerlink" title="列出所有镜像"></a>列出所有镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h2 id="查看运行的容器"><a href="#查看运行的容器" class="headerlink" title="查看运行的容器"></a>查看运行的容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><blockquote><p>列出所有容器ID</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -aq</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="查看所有的容器包括停止的"><a href="#查看所有的容器包括停止的" class="headerlink" title="查看所有的容器包括停止的"></a>查看所有的容器包括停止的</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><blockquote><p>删除容器  </p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm &lt;NAMES&gt;/&lt;CONTAINER ID&gt;</span><br></pre></td></tr></table></figure><blockquote><p>删除镜像</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image rm &lt;IMAGES&gt;</span><br></pre></td></tr></table></figure><img data-src="/posts/11faeb76/2022-06-30-22-57-53.png" class=""><h2 id="停止、启动、杀死、重启一个容器"><a href="#停止、启动、杀死、重启一个容器" class="headerlink" title="停止、启动、杀死、重启一个容器"></a>停止、启动、杀死、重启一个容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker stop Name或者ID  </span><br><span class="line">docker start Name或者ID  </span><br><span class="line">docker <span class="built_in">kill</span> Name或者ID  </span><br><span class="line">docker restart name或者ID</span><br></pre></td></tr></table></figure><h2 id="docker启动失败如何查看容器日志"><a href="#docker启动失败如何查看容器日志" class="headerlink" title="docker启动失败如何查看容器日志"></a><code>docker</code>启动失败如何查看容器日志</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们可以通过如下命令来获取容器的日志地址</span></span><br><span class="line">docker inspect --format <span class="string">&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27;</span> &lt;NAMES&gt;</span><br><span class="line"><span class="comment">#  然后通过cat命令查看上述命令找到的日志地址</span></span><br></pre></td></tr></table></figure><img data-src="/posts/11faeb76/2022-06-30-23-11-07.png" class=""><blockquote><p>更简单的方式</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;NAMES&gt;</span><br></pre></td></tr></table></figure><h2 id="M1拉取Mysql数据库"><a href="#M1拉取Mysql数据库" class="headerlink" title="M1拉取Mysql数据库"></a><code>M1</code>拉取<code>Mysql</code>数据库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker pull --platform linux/x86_64 mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动mysql</span></span><br><span class="line">docker run --name mymysql -e MYSQL_ROOT_PASSWORD=root -d -p 3306:3306  mysql:5.7</span><br></pre></td></tr></table></figure><h2 id="Docker安装Nginx并且部署Vue项目"><a href="#Docker安装Nginx并且部署Vue项目" class="headerlink" title="Docker安装Nginx并且部署Vue项目"></a><code>Docker</code>安装<code>Nginx</code>并且部署<code>Vue</code>项目</h2><h3 id="拉取Nginx"><a href="#拉取Nginx" class="headerlink" title="拉取Nginx"></a>拉取<code>Nginx</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure><h3 id="创建挂载目录"><a href="#创建挂载目录" class="headerlink" title="创建挂载目录"></a>创建挂载目录</h3><p>找个目录创建一下目录（在<code>/Users/jinmao/Documents/Docker/</code>下创建<code>/nginx</code>）</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir</span><br></pre></td></tr></table></figure><h3 id="运行并且挂载nginx"><a href="#运行并且挂载nginx" class="headerlink" title="运行并且挂载nginx"></a>运行并且挂载<code>nginx</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 --name nginx_BEBA  -v /Users/jinmao/Documents/Docker/nginx/dist:/usr/share/nginx/html --restart=always nginx</span><br></pre></td></tr></table></figure><h3 id="把vue的目录上传到挂载的目录"><a href="#把vue的目录上传到挂载的目录" class="headerlink" title="把vue的目录上传到挂载的目录"></a>把<code>vue</code>的目录上传到挂载的目录</h3><p><code>vue</code>项目打包</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="builtin-name">run</span> build</span><br></pre></td></tr></table></figure><img data-src="/posts/11faeb76/2022-07-02-09-15-41.png" class=""><h3 id="重启Docker容器"><a href="#重启Docker容器" class="headerlink" title="重启Docker容器"></a>重启<code>Docker</code>容器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart <span class="tag">&lt;<span class="name">NAMES</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时就可以了，<code>nginx</code>开放端口为<code>80</code>,直接<code>ip</code>访问即可</p><h3 id="为什么要挂载在到docker的-usr-share-nginx-html"><a href="#为什么要挂载在到docker的-usr-share-nginx-html" class="headerlink" title="为什么要挂载在到docker的/usr/share/nginx/html"></a>为什么要挂载在到<code>docker</code>的<code>/usr/share/nginx/html</code></h3><p>看<code>nginx</code>的默认配置就知道<br>进入<code>docker</code>的容器里面：<br>通过命令<code>docker ps</code>查看运行容器信息；<br>在通过命令 <code>docker exec -it 容器id /bin/bash </code>进入容器目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &lt;NAMES&gt; /bin/bash</span><br></pre></td></tr></table></figure><p>进入<code>cd /etc/nginx/conf.d</code> , 查看<code>default.conf</code>文件</p><img data-src="/posts/11faeb76/2022-07-02-09-34-32.png" class=""><p>但是你会发现<code>etc/nginx</code>下有个<code>nginx.conf</code> 配置文件我们查看配置发现这里有条语句是引用了上面<code>default.conf</code>的配置，由此可见我们以后需要配置其他项目路径就直接配置<code>default.conf</code>就行了。</p><img data-src="/posts/11faeb76/2022-07-02-09-36-44.png" class=""><p>但是这个有个缺点每次修改都需要进入容器的内部求修改。</p><h3 id="优化nginx的配置文件（为了以后多项目部署方便修改Nginx）"><a href="#优化nginx的配置文件（为了以后多项目部署方便修改Nginx）" class="headerlink" title="优化nginx的配置文件（为了以后多项目部署方便修改Nginx）"></a>优化<code>nginx</code>的配置文件（为了以后多项目部署方便修改<code>Nginx</code>）</h3><p>我们可以通过把<code>etc/nginx</code> 复制到宿主机的目录下这样我们就可以修改宿主机的配置文件在重新启动一下容器就可以实现最新的配置</p><ol><li><p>使用命令复制容器的文件到宿主机：<code>docker cp &lt;NAMES&gt;:/etc/nginx /Users/jinmao/Documents/Docker/nginx/</code></p><blockquote><p><code>/etc/nginx</code>:为需要复制的文件</p></blockquote><blockquote><p><code>/Users/jinmao/Documents/Docker/nginx/dist</code> :把他保存到那个目录下</p></blockquote> <img data-src="/posts/11faeb76/2022-07-02-09-52-09.png" class=""></li><li><p>进入<code>/nginx</code>修改宿主机(本地的)的<code>default.conf</code>配置文件命令</p> <img data-src="/posts/11faeb76/2022-07-02-10-35-29.png" class=""></li><li><p>通过命令删除就的<code>nginx</code>容器：<code>docker rm 容器id</code> 删除容器</p></li><li><p>重新启动容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run --name &lt;name&gt; -p 80:80 -v /Users/jinmao/Documents/Docker/nginx/dist:/Users/jinmao/Documents/Study/doctor/Topic1/frontPro/dist -v /Users/jinmao/Documents/Docker/nginx/nginx:/etc/nginx -d nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># –name：后面的是容器名称</span></span><br><span class="line"><span class="comment"># -p:冒号前面是宿主机的对外端口，冒号后面的是容器的端口</span></span><br><span class="line"><span class="comment"># -v：冒号前面的是宿主机的文件目录，冒号后面是容器的内部文件目录</span></span><br><span class="line"><span class="comment"># -d:表示后端运行</span></span><br><span class="line"><span class="comment"># nginx：最后面的nginx是镜像的名称</span></span><br></pre></td></tr></table></figure> <img data-src="/posts/11faeb76/2022-07-02-11-08-24.png" class=""></li></ol><p>现在已经把宿主机的<code>vue</code>项目<code>dist</code>挂载到<code>nginx</code>容器中，这样监听的请求就会被<code>nginx</code>代理到对应的目录中访问资源，还有宿主机的<code>/Users/jinmao/Documents/Docker/nginx/nginx</code>也被挂载到了容器<code>etc/nginx</code>中，这样只要修改宿主机的<code>nginx</code>配置,只要重启容器最新配置就会生效。</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLjUxY3RvLmNvbS91XzE1NTg1Njk5LzUxNzk2ODg=">参考链接</span></p><h2 id="制作Dockerfile-Springboot"><a href="#制作Dockerfile-Springboot" class="headerlink" title="制作Dockerfile(Springboot)"></a>制作<code>Dockerfile</code>(<code>Springboot</code>)</h2><p><code>Maven</code> 打包完<code>jar</code>包，忽略。。</p><h3 id="编辑DockerFile文件"><a href="#编辑DockerFile文件" class="headerlink" title="编辑DockerFile文件"></a>编辑<code>DockerFile</code>文件</h3><p>和 <code>jar</code>包在同一级</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim Dockerfile</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker image for springboot file run</span></span><br><span class="line"><span class="comment"># VERSION 1.0.0</span></span><br><span class="line"><span class="comment"># Author: jinmao</span></span><br><span class="line">FROM java:8</span><br><span class="line">VOLUME /tmp</span><br><span class="line">EXPOSE 9999</span><br><span class="line">ADD thesis-project.jar /app.jar</span><br><span class="line">RUN bash -c <span class="string">&#x27;touch /app.jar&#x27;</span></span><br><span class="line">ENTRYPOINT [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app.jar&quot;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>打包命令</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker buil -t &lt;lower_name&gt; .</span><br></pre></td></tr></table></figure><img data-src="/posts/11faeb76/2022-07-02-13-32-00.png" class=""><blockquote><p>运行</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9999:9999 --name BABE_Thesis -d babe_end</span><br></pre></td></tr></table></figure><img data-src="/posts/11faeb76/2022-07-02-13-35-28.png" class="">]]></content>
    
    
    <summary type="html">&lt;p&gt;文档地址：&lt;a href=&quot;https://yeasy.gitbook.io/docker_practice/&quot;&gt;https://yeasy.gitbook.io/docker_practice/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://hub.docker.com/&quot;&gt;Docker hub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/install/&quot;&gt;Docker Install&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;列出所有镜像&quot;&gt;&lt;a href=&quot;#列出所有镜像&quot; class=&quot;headerlink&quot; title=&quot;列出所有镜像&quot;&gt;&lt;/a&gt;列出所有镜像&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker images&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;查看运行的容器&quot;&gt;&lt;a href=&quot;#查看运行的容器&quot; class=&quot;headerlink&quot; title=&quot;查看运行的容器&quot;&gt;&lt;/a&gt;查看运行的容器&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker ps&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;列出所有容器ID&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker ps -aq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
    <category term="Docker" scheme="https://smile1231.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Springboot工程项目.gitignore配置</title>
    <link href="https://smile1231.github.io/posts/ba003691/"/>
    <id>https://smile1231.github.io/posts/ba003691/</id>
    <published>2022-06-30T00:57:45.000Z</published>
    <updated>2022-07-01T01:13:52.465Z</updated>
    
    <content type="html"><![CDATA[<img data-src="/posts/ba003691/2022-06-30-08-58-34.png" class=""><span id="more"></span><p><code>SpringBoot</code>根目录下创建<code>.gitignore</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">../HELP.md</span><br><span class="line">target/</span><br><span class="line">!.mvn/wrapper/maven-wrapper.jar</span><br><span class="line">!**/src/main/**</span><br><span class="line">!**/src/<span class="built_in">test</span>/**</span><br><span class="line"></span><br><span class="line"><span class="comment">### STS ###</span></span><br><span class="line">.apt_generated</span><br><span class="line">.classpath</span><br><span class="line">.factorypath</span><br><span class="line">.project</span><br><span class="line">.settings</span><br><span class="line">.springBeans</span><br><span class="line">.sts4-cache</span><br><span class="line">.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### IntelliJ IDEA ###</span></span><br><span class="line">.idea</span><br><span class="line">*.iws</span><br><span class="line">*.iml</span><br><span class="line">*.ipr</span><br><span class="line">.mvn</span><br><span class="line">mvnw*</span><br><span class="line">HELP.md</span><br><span class="line"></span><br><span class="line"><span class="comment">### NetBeans ###</span></span><br><span class="line">/nbproject/private/</span><br><span class="line">/nbbuild/</span><br><span class="line">/dist/</span><br><span class="line">/nbdist/</span><br><span class="line">/.nb-gradle/</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"><span class="comment">### VS Code ###</span></span><br><span class="line">.vscode/</span><br><span class="line"></span><br><span class="line"><span class="comment">### generated files ###</span></span><br><span class="line">bin/</span><br><span class="line">gen/</span><br><span class="line"></span><br><span class="line"><span class="comment">### MAC ###</span></span><br><span class="line">.DS_Store</span><br><span class="line"></span><br><span class="line"><span class="comment">### Other ###</span></span><br><span class="line">logs/</span><br><span class="line"><span class="built_in">log</span></span><br><span class="line">temp/</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;img src=&quot;/posts/ba003691/2022-06-30-08-58-34.png&quot; class=&quot;&quot;&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Linux常用命令</title>
    <link href="https://smile1231.github.io/posts/d0edc1ed/"/>
    <id>https://smile1231.github.io/posts/d0edc1ed/</id>
    <published>2022-06-29T14:06:39.000Z</published>
    <updated>2022-07-02T09:28:33.087Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux查看空间大小的命令"><a href="#Linux查看空间大小的命令" class="headerlink" title="Linux查看空间大小的命令"></a><code>Linux</code>查看空间大小的命令</h2><span id="more"></span><h3 id="df"><a href="#df" class="headerlink" title="df"></a><code>df</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">第一列：文件系统</span><br><span class="line">第二列：容量</span><br><span class="line">第三列：已用容量</span><br><span class="line">第四列：可用容量</span><br><span class="line">第五列：已用容量%</span><br><span class="line">第六列：挂载点</span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-29-22-09-03.png" class=""><p>参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-a: 显示所有文件系统信息，包括系统特有的 /proc、/sysfs 等文件系统；</span><br><span class="line">-m: 以 MB 为单位显示容量；</span><br><span class="line">-k: 以 KB 为单位显示容量，默认以 KB 为单位；</span><br><span class="line">-h: 使用人们习惯的 KB、MB 或 GB 等单位自行显示容量；</span><br><span class="line">-T: 显示该分区的文件系统名称；</span><br><span class="line">-i: 不用硬盘容量显示，而是以含有 inode 的数量来显示。</span><br><span class="line">--block-size=&lt;区块大小&gt;：以指定的区块大小来显示区块数目；</span><br><span class="line">-l或--<span class="built_in">local</span>：仅显示本地端的文件系统；</span><br><span class="line">--no-sync：在取得磁盘使用信息前，不要执行sync指令，此为预设值；</span><br><span class="line">-P或--portability：使用POSIX的输出格式；</span><br><span class="line">--sync：在取得磁盘使用信息前，先执行sync指令；</span><br><span class="line">-t&lt;文件系统类型&gt;或--<span class="built_in">type</span>=&lt;文件系统类型&gt;：仅显示指定文件系统类型的磁盘信息；</span><br><span class="line">-x&lt;文件系统类型&gt;或--exclude-type=&lt;文件系统类型&gt;：不要显示指定文件系统类型的磁盘信息；</span><br><span class="line">--<span class="built_in">help</span>：显示帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-29-22-17-18.png" class=""><h3 id="du"><a href="#du" class="headerlink" title="du"></a><code>du</code></h3><img data-src="/posts/d0edc1ed/2022-06-29-22-20-51.png" class=""><blockquote><p>如果只想查看当前目录占用空间的大小，不查看子目录或者子文件占用空间大小，那么<code>s</code>选项无疑很有帮助，如下：</p></blockquote><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du -sh</span></span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-29-22-23-40.png" class=""><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h --max-depth=0</span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-29-22-29-35.png" class=""><h2 id="Mount文件挂载"><a href="#Mount文件挂载" class="headerlink" title="Mount文件挂载"></a><code>Mount</code>文件挂载</h2><blockquote><p>文件系统挂载</p></blockquote><p>硬件设备必须挂载之后才能使用，只不过，有些硬件设备（比如硬盘分区）在每次系统启动时会自动挂载，而有些（比如 U 盘、光盘）则需要手动进行挂载。</p><p>挂载指的是将硬件设备的文件系统和 <code>Linux</code> 系统中的文件系统，通过指定目录（作为挂载点）进行关联。而要将文件系统挂载到 <code>Linux</code> 系统上，就需要使用 <code>mount</code> 挂载命令。</p><blockquote><p><code>mount</code> 命令的常用格式有以下几种：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mount [-l]</span><br><span class="line"><span class="comment"># 单纯使用 `mount` 命令，会显示出系统中已挂载的设备信息，使用 `-l` 选项，会额外显示出卷标名称（读者可自行运行，查看输出结果）；</span></span><br><span class="line"></span><br><span class="line">mount -a</span><br><span class="line"><span class="comment"># -a 选项的含义是自动检查 /etc/fstab 文件中有无疏漏被挂载的设备文件，如果有，则进行自动挂载操作。这里简单介绍一下 /etc/fstab 文件，此文件是自动挂载文件，系统开机时会主动读取 /etc/fstab 这个文件中的内容，根据该文件的配置，系统会自动挂载指定设备。</span></span><br><span class="line"></span><br><span class="line">mount [-t 系统类型] [-L 卷标名] [-o 特殊选项] [-n] 设备文件名 挂载点</span><br><span class="line"></span><br><span class="line"><span class="comment"># 各选项的含义分别是：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -t 系统类型：指定欲挂载的文件系统类型。Linux 常见的支持类型有 EXT2、EXT3、EXT4、iso9660（光盘格式）、vfat、reiserfs 等。如果不指定具体类型，挂载时 Linux 会自动检测。</span></span><br><span class="line"><span class="comment"># -L 卷标名：除了使用设备文件名（例如 /dev/hdc6）之外，还可以利用文件系统的卷标名称进行挂载。</span></span><br><span class="line"><span class="comment"># -n：在默认情况下，系统会将实际挂载的情况实时写入 /etc/mtab 文件中，但在某些场景下（例如单人维护模式），为了避免出现问题，会刻意不写入，此时就需要使用这个选项；</span></span><br><span class="line"><span class="comment"># -o 特殊选项：可以指定挂载的额外选项，比如读写权限、同步/异步等，如果不指定，则使用默认值（defaults）。</span></span><br></pre></td></tr></table></figure><blockquote><p>mount 命令选项及功能</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">rw/ro ：是否对挂载的文件系统拥有读写权限，rw 为默认值，表示拥有读写权限；ro 表示只读权限。</span><br><span class="line"></span><br><span class="line">async/sync ： 此文件系统是否使用同步写入（sync）或异步（async）的内存机制，默认为异步 async。</span><br><span class="line"></span><br><span class="line">dev/nodev ：是否允许从该文件系统的 block 文件中提取数据，为了保证数据安装，默认是 nodev。</span><br><span class="line"></span><br><span class="line">auto/noauto ：是否允许此文件系统被以 mount -a 的方式进行自动挂载，默认是 auto。</span><br><span class="line"></span><br><span class="line">suid/nosuid ：设定文件系统是否拥有 SetUID 和 SetGID 权限，默认是拥有。</span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span>/noexec ：设定在文件系统中是否允许执行可执行文件，默认是允许。</span><br><span class="line"></span><br><span class="line">user/nouser ：设定此文件系统是否允许让普通用户使用 mount 执行实现挂载，默认是不允许（nouser），仅有 root 可以。</span><br><span class="line"></span><br><span class="line">defaults ：定义默认值，相当于 rw、suid、dev、<span class="built_in">exec</span>、auto、nouser、async 这 7 个选项。</span><br><span class="line"></span><br><span class="line">remount重新挂载已挂载的文件系统，一般用于指定修改特殊权限。</span><br></pre></td></tr></table></figure><h2 id="查看系统信息"><a href="#查看系统信息" class="headerlink" title="查看系统信息"></a>查看系统信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-30-10-12-30.png" class=""><h2 id="查看开放端口"><a href="#查看开放端口" class="headerlink" title="查看开放端口"></a>查看开放端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -lntu </span><br><span class="line">或者  ss -lntu</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看端口号</span><br><span class="line">netstat -ntlp //查看当前所有tcp端口·</span><br><span class="line">netstat -ntulp |grep 6666 //查看所有1935端口使用情况·</span><br><span class="line">CentOS默认开放的本地端口范围</span><br><span class="line">系统本地开放端口的范围：（默认30000多到60000多）</span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-06-30-10-13-53.png" class=""><h2 id="检查端口是否打开"><a href="#检查端口是否打开" class="headerlink" title="检查端口是否打开"></a>检查端口是否打开</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -na | grep :9999</span><br><span class="line">ss -na | grep :9999</span><br></pre></td></tr></table></figure><p>输出必须保持空白，从而验证它当前未被使用，以便我们可以将端口规则手动添加到系统<code>iptables</code>防火墙。</p><h2 id="centos查看防火墙状态的方法"><a href="#centos查看防火墙状态的方法" class="headerlink" title="centos查看防火墙状态的方法"></a><code>centos</code>查看防火墙状态的方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">service iptables status <span class="comment">#查看iptables防火墙状态</span></span><br><span class="line">或</span><br><span class="line">systemctl status firewalld <span class="comment">#查看firewall防火墙服务状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables防火墙</span></span><br><span class="line">service iptables start <span class="comment">#启动防火墙</span></span><br><span class="line">service iptables stop <span class="comment">#停止防火墙</span></span><br><span class="line">service iptables restart <span class="comment">#重启防火墙</span></span><br><span class="line"><span class="comment">#firewall防火墙</span></span><br><span class="line">service firewalld start <span class="comment"># 开启</span></span><br><span class="line">service firewalld stop <span class="comment"># 关闭 </span></span><br><span class="line">service firewalld restart <span class="comment"># 重启</span></span><br></pre></td></tr></table></figure><h2 id="开放端口"><a href="#开放端口" class="headerlink" title="开放端口"></a>开放端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要root权限</span></span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line"><span class="comment"># 命令含义：</span></span><br><span class="line">--zone <span class="comment">#作用域</span></span><br><span class="line">--add-port=6666/tcp <span class="comment">#添加端口，格式为：端口/通讯协议</span></span><br><span class="line">--permanent <span class="comment">#永久生效，没有此参数重启后失效</span></span><br></pre></td></tr></table></figure><h2 id="防火墙firewall"><a href="#防火墙firewall" class="headerlink" title="防火墙firewall"></a>防火墙<code>firewall</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启firewall</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否生效</span></span><br><span class="line">firewall-cmd --zone=public —query-port=8080/tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止firewall</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁止firewall开机启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><h2 id="检测远程端口是否打开"><a href="#检测远程端口是否打开" class="headerlink" title="检测远程端口是否打开"></a>检测远程端口是否打开</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">telnet 118.10.6.128 88</span><br><span class="line"><span class="comment"># 测试远程主机端口是否打开</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmap ip -p port <span class="comment">#测试端口</span></span><br><span class="line">nmap ip </span><br><span class="line"><span class="comment"># 根据显示close/open确定端口是否打开</span></span><br></pre></td></tr></table></figure><img data-src="/posts/d0edc1ed/2022-07-01-09-13-27.png" class=""><h2 id="Linux生成-UUID"><a href="#Linux生成-UUID" class="headerlink" title="Linux生成 UUID"></a><code>Linux</code>生成 <code>UUID</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/kernel/random/uuid</span><br></pre></td></tr></table></figure><h2 id="查看正在运行的java线程"><a href="#查看正在运行的java线程" class="headerlink" title="查看正在运行的java线程"></a>查看正在运行的<code>java</code>线程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jps -l</span><br><span class="line"></span><br><span class="line"><span class="comment">## 杀死线程</span></span><br><span class="line"><span class="built_in">kill</span> -9 &lt;PID&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Linux查看空间大小的命令&quot;&gt;&lt;a href=&quot;#Linux查看空间大小的命令&quot; class=&quot;headerlink&quot; title=&quot;Linux查看空间大小的命令&quot;&gt;&lt;/a&gt;&lt;code&gt;Linux&lt;/code&gt;查看空间大小的命令&lt;/h2&gt;</summary>
    
    
    
    
    <category term="Linux" scheme="https://smile1231.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Java运行调用Shell脚本</title>
    <link href="https://smile1231.github.io/posts/8da68a98/"/>
    <id>https://smile1231.github.io/posts/8da68a98/</id>
    <published>2022-06-29T14:02:56.000Z</published>
    <updated>2022-07-05T14:47:31.159Z</updated>
    
    <content type="html"><![CDATA[<p>关于在<code>java</code>中如何去调用<code>shell</code>脚本，最近忙活了老半天</p><p>在<code>java</code>中有一个<code>ProcessBuilder</code>类,能够调用到<code>sh</code>命令，话不多说，贴上代码</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">zipFileAction</span><span class="params">(String computationDir,String email)</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;###### start zip file , computation is &#123;&#125; ###### &quot;</span>, computationDir);</span><br><span class="line">    <span class="comment">// initShell</span></span><br><span class="line">    Process process = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">        ProcessBuilder pb = <span class="keyword">new</span> ProcessBuilder();</span><br><span class="line">        <span class="comment">//这里指的shell文件所在的目录</span></span><br><span class="line">        pb.directory(<span class="keyword">new</span> File(DirectoryUtil.getFileLocalAbsolutePathWithFileUrl(<span class="string">&quot;shell/action/&quot;</span>)));</span><br><span class="line">        <span class="comment">//权限</span></span><br><span class="line">        pb.command(<span class="string">&quot;chmod 777 &quot;</span> + shellProperties.getZipShellName());</span><br><span class="line">        <span class="comment">//此处的 ./ 不是指当前文件夹 ， 而是指运行的意思</span></span><br><span class="line">        pb.command(<span class="string">&quot;./&quot;</span>+shellProperties.getZipShellName() ,computationDir,shellProperties.getCompressedFileName());</span><br><span class="line">        <span class="comment">// 将错误输出流转移到标准输出流中,但使用Runtime不可以</span></span><br><span class="line">        pb.redirectErrorStream(<span class="keyword">true</span>);</span><br><span class="line">        process = pb.start();</span><br><span class="line">        <span class="comment">//将shell日志写入到文件中</span></span><br><span class="line">        writeToLocal(DirectoryUtil.getFileLocalAbsolutePathWithFileUrl(computationDir) + <span class="string">&quot;/zipLog.txt&quot;</span>,process.getInputStream());</span><br><span class="line"><span class="comment">//            String dataMsg = reader(process.getInputStream());</span></span><br><span class="line"><span class="comment">//            log.info(&quot;###### shell zip script data message is &#123;&#125; ###### &quot;,dataMsg);</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;###### run shell zip script is error , message is &#123;&#125;######&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> runningStatus = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        runningStatus = process.waitFor();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;###### run shell zip script occurs error, error is &#123;&#125; ######&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(runningStatus != <span class="number">0</span>) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;###### run shell zip script failed.###### &quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;###### run shell zip script success. ######&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 数据读取操作</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> input 输入流</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">reader</span><span class="params">(InputStream input)</span> </span>&#123;</span><br><span class="line">    StringBuilder outDat = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">try</span> (InputStreamReader inputReader = <span class="keyword">new</span> InputStreamReader(input, StandardCharsets.UTF_8);</span><br><span class="line">            BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(inputReader)) &#123;</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            outDat.append(line);</span><br><span class="line">            outDat.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;exception is &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> outDat.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 将InputStream写入本地文件</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> destination 写入本地目录</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> input输入流</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeToLocal</span><span class="params">(String destination, InputStream input)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    FileOutputStream downloadFile = <span class="keyword">new</span> FileOutputStream(destination);</span><br><span class="line">    <span class="keyword">while</span> ((index = input.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">        downloadFile.write(bytes, <span class="number">0</span>, index);</span><br><span class="line">        downloadFile.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    downloadFile.close();</span><br><span class="line">    input.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;关于在&lt;code&gt;java&lt;/code&gt;中如何去调用&lt;code&gt;shell&lt;/code&gt;脚本，最近忙活了老半天&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;java&lt;/code&gt;中有一个&lt;code&gt;ProcessBuilder&lt;/code&gt;类,能够调用到&lt;code&gt;sh&lt;/code&gt;命令，话不多说，贴上代码&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="https://smile1231.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>The Basic knowledge of Anaconda</title>
    <link href="https://smile1231.github.io/posts/378107f2/"/>
    <id>https://smile1231.github.io/posts/378107f2/</id>
    <published>2022-05-23T08:16:39.000Z</published>
    <updated>2022-07-05T15:16:31.469Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Anaconda基本学习"><a href="#Anaconda基本学习" class="headerlink" title="Anaconda基本学习"></a><code>Anaconda</code>基本学习</h1><p><code>conda</code>中想要安装的包，可以在这个网站搜索查询： <span class="exturl" data-url="aHR0cHM6Ly9hbmFjb25kYS5vcmcvc2VhcmNoP3E9ZmFzdHEtam9pbg==">https://anaconda.org/search?q=fastq-join</span></p><blockquote><p> 官网下载  <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHBzOi8vd3d3LmFuYWNvbmRhLmNvbS9kb3dubG9hZC8=">链接</span></p></blockquote><p>此处不多说</p><blockquote><p>环境变量的配置(windows)</p></blockquote><p>需要注意的是,<code>AnaConda</code>需要配置三个路径的环境变量</p><span id="more"></span><img data-src="/posts/378107f2/2022-05-23-16-19-09.png" class=""><p>根据自己的安装目录为准</p><p>此时在<code>windows</code>中的<code>cmd</code>中输入<code>conda</code>命令</p><img data-src="/posts/378107f2/2022-05-23-16-19-17.png" class=""><p>说明安装完毕,就可以投入使用了</p><h2 id="Conda的基本指令"><a href="#Conda的基本指令" class="headerlink" title="Conda的基本指令"></a><code>Conda</code>的基本指令</h2><h3 id="环境管理"><a href="#环境管理" class="headerlink" title="环境管理"></a>环境管理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级conda</span></span><br><span class="line">conda update conda</span><br><span class="line">conda update anaconda</span><br><span class="line">conda update anaconda-navigator    <span class="comment">#update最新版本的anaconda-navigator</span></span><br><span class="line">conda update xxx   <span class="comment">#更新xxx文件包</span></span><br><span class="line"></span><br><span class="line">conda --version <span class="comment">#获取版本号</span></span><br><span class="line"></span><br><span class="line">conda update --<span class="built_in">help</span></span><br><span class="line">conda remove --<span class="built_in">help</span>  <span class="comment">#查看某一命令的帮助，如update命令及remove命令</span></span><br><span class="line"></span><br><span class="line">conda env -h <span class="comment"># 查看环境管理的全部命令帮助</span></span><br><span class="line"></span><br><span class="line">conda create --name your_env_name <span class="comment">#创建环境 --name可以省略为-n</span></span><br><span class="line"></span><br><span class="line">conda create --n your_env_name python=<span class="number">3.7</span><span class="comment">#创建制定python版本的环境</span></span><br><span class="line"></span><br><span class="line">conda create --name your_env_name numpy scipy<span class="comment">#创建包含某些包的环境</span></span><br><span class="line"></span><br><span class="line">conda info --envs</span><br><span class="line">conda env <span class="built_in">list</span>  <span class="comment">#列举当前所有环境</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#进入某个环境</span></span><br><span class="line">activate your_env_name</span><br><span class="line"></span><br><span class="line"><span class="comment">#退出当前环境</span></span><br><span class="line">deactivate </span><br><span class="line"></span><br><span class="line"><span class="comment">#复制某个环境</span></span><br><span class="line">conda create --name new_env_name --clone old_env_name </span><br><span class="line"></span><br><span class="line"><span class="comment">#删除某个环境</span></span><br><span class="line">conda remove --name your_env_name --<span class="built_in">all</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="分享环境"><a href="#分享环境" class="headerlink" title="分享环境"></a>分享环境</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果你想把你当前的环境配置与别人分享，这样ta可以快速建立一个与你一模一样的环境（同一个版本的python及各种包）来共同开发/进行新的实验。一个分享环境的快速方法就是给ta一个你的环境的.yml文件。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#首先通过activate target_env要分享的环境target_env，然后输入下面的命令会在当前工作目录下生成一个environment.yml文件，</span></span><br><span class="line"></span><br><span class="line">conda env export &gt; environment.yml</span><br><span class="line"></span><br><span class="line"><span class="comment">#小伙伴拿到environment.yml文件后，将该文件放在工作目录下，可以通过以下命令从该文件创建环境</span></span><br><span class="line"></span><br><span class="line">conda env create -f environment.yml</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>yml</code>是这样的</p><img data-src="/posts/378107f2/2022-05-23-16-19-29.png" class=""><h3 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h3><p>列举当前活跃环境下的所有包</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list</span><br></pre></td></tr></table></figure><p>列举一个非当前活跃环境下的所有包</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list -n your_env_name</span><br></pre></td></tr></table></figure><p>为指定环境安装某个包</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -n env_name package_name</span><br></pre></td></tr></table></figure><h1 id="搭载VsCode使用junpyter"><a href="#搭载VsCode使用junpyter" class="headerlink" title="搭载VsCode使用junpyter"></a>搭载<code>VsCode</code>使用<code>junpyter</code></h1><p>安装<code>VsCode</code>插件</p><img data-src="/posts/378107f2/2022-05-23-16-19-42.png" class=""><p>这个时候就具备使用<code>Jupyter</code>的条件了,因为<code>Python</code>插件内部也安装了<code>Jupyter</code>插件,此时<code>Ctrl+Shift+P</code>弹出</p><img data-src="/posts/378107f2/2022-05-23-16-19-49.png" class=""><p>新建一个<code>Jupyter</code>就可以使用了</p><img data-src="/posts/378107f2/2022-05-23-16-19-55.png" class=""><p>如果报错,一般重启一下VSCode就能够使用,喜欢使用主要是因为<code>Jupyter</code>可以一行一行的执行,嘻嘻</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Anaconda基本学习&quot;&gt;&lt;a href=&quot;#Anaconda基本学习&quot; class=&quot;headerlink&quot; title=&quot;Anaconda基本学习&quot;&gt;&lt;/a&gt;&lt;code&gt;Anaconda&lt;/code&gt;基本学习&lt;/h1&gt;&lt;p&gt;&lt;code&gt;conda&lt;/code&gt;中想要安装的包，可以在这个网站搜索查询： &lt;a href=&quot;https://anaconda.org/search?q=fastq-join&quot;&gt;https://anaconda.org/search?q=fastq-join&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; 官网下载  &lt;a href=&quot;https://link.jianshu.com/?t=https://www.anaconda.com/download/&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;此处不多说&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;环境变量的配置(windows)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;需要注意的是,&lt;code&gt;AnaConda&lt;/code&gt;需要配置三个路径的环境变量&lt;/p&gt;</summary>
    
    
    
    <category term="master" scheme="https://smile1231.github.io/categories/master/"/>
    
    
    <category term="master" scheme="https://smile1231.github.io/tags/master/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 获取服务IP地址和端口号</title>
    <link href="https://smile1231.github.io/posts/67f40b37/"/>
    <id>https://smile1231.github.io/posts/67f40b37/</id>
    <published>2022-05-21T14:58:51.000Z</published>
    <updated>2022-05-21T15:15:48.225Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><code>IP</code>地址</p></blockquote><p><code>IP</code>地址非常简单, 直接上代码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    String result = InetAddress.getLocalHost().getHostAddress();</span><br><span class="line">&#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">    LOGGER.error(<span class="string">&quot;获取IP失败&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><blockquote><p>端口号</p></blockquote><p>获取端口号有四种方式:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- `<span class="meta">@Value</span>`注解</span><br><span class="line">- `<span class="meta">@LocalServerPort</span>`注解</span><br><span class="line">- `Environment`</span><br><span class="line"></span><br><span class="line">我们将`<span class="meta">@Value</span>和<span class="meta">@LocalServerPort</span>`放在一起, 其实`<span class="meta">@LocalServerPort</span>`等价于`<span class="meta">@Value(&quot;$&#123;local.server.port&#125;&quot;)</span>`:</span><br><span class="line">```java</span><br><span class="line"><span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line"><span class="keyword">int</span> serverPort;</span><br><span class="line"></span><br><span class="line"><span class="meta">@LocalServerPort</span></span><br><span class="line"><span class="keyword">int</span> localServerPort</span><br></pre></td></tr></table></figure><p>这里要特别注意, 如果没有在配置文件中配置<code>local.server.port, @LocalServerPort</code>会为<code>null</code><br><code>Environment</code>本质和上述方法类似, 用它来读取配置属性:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">Environment environment;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> environment.getProperty(<span class="string">&quot;server.port&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTY2OTIwMTQwNDYxOTY1MzIw">参考链接</span></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;IP&lt;/code&gt;地址&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;IP&lt;/code&gt;地址非常简单, 直接上代码:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String result = InetAddress.getLocalHost().getHostAddress();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (UnknownHostException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LOGGER.error(&lt;span class=&quot;string&quot;&gt;&amp;quot;获取IP失败&amp;quot;&lt;/span&gt;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/categories/SpringBoot/"/>
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>一图看懂Java中的PO,BO,VO,DTO,POJO,DAO,DO</title>
    <link href="https://smile1231.github.io/posts/bd76a990/"/>
    <id>https://smile1231.github.io/posts/bd76a990/</id>
    <published>2022-05-21T14:57:50.000Z</published>
    <updated>2022-05-21T15:15:48.228Z</updated>
    
    <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTUyODQ4Njc1OTI0MDgyNzE4"> 参考链接 </span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTUyODQ4Njc1OTI0MDgyNzE4&quot;&gt; 参考链接 &lt;/span&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/categories/Java/"/>
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>在Javadoc注释中引用方法</title>
    <link href="https://smile1231.github.io/posts/d6d1be75/"/>
    <id>https://smile1231.github.io/posts/d6d1be75/</id>
    <published>2022-05-21T14:00:19.000Z</published>
    <updated>2022-05-21T15:15:48.229Z</updated>
    
    <content type="html"><![CDATA[<p>最近用到如何在注释中<code>link</code>到另一个类</p><ol><li><code>@link</code>标签<br><code>Javadoc</code> 提供了<code>@link</code>内联标记来引用Java 类中的成员。我们可以认为<code>@link</code>标签类似于 <code>HTML</code> 中的锚标签，用于通过超链接将一个页面链接到另一个页面。</li></ol><p>让我们看看使用<code>@link</code>标记引用 <code>Javadoc</code> 注释中的方法的语法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="meta">@link</span> path_to_member label&#125;</span><br></pre></td></tr></table></figure><p>与锚标签类似，<code>path_to_member</code>是目的地，标签是显示文本。</p><p>标签是可选的，但<code>path_to_member</code>是引用方法所必需的。但是，始终使用标签名称来避免复杂的参考链接是一种很好的做法。<code>path_to_member</code>的语法 根据我们引用的方法是否驻留在同一个类中而有所不同。</p><p>需要注意的是，大括号<code>&#123;</code>和<code>@link</code>之间不能有空格。如果它们之间有空格，<code>Javadoc </code>工具将无法正确生成引用。但是， <code>path_to_member、label</code>和右大括号之间没有空间限制。</p><span id="more"></span><ol start="2"><li>引用同一个类中的方法<br>引用方法的最简单方法是在同一个类中：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="meta">@link</span> #methodName() LabelName&#125;</span><br></pre></td></tr></table></figure>假设我们正在记录一个方法，并且我们想从同一个类中引用另一个方法：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Also, check the &#123;<span class="doctag">@link</span> #move() Move&#125; method for more movement details.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>在这种情况下，<code>walk()</code>方法引用同一类中的<code>move()</code>实例方法。</li></ol><p>如果被引用的方法有参数，当我们想要引用一个重载或参数化的方法时，我们必须相应地指定其参数的类型。</p><p>考虑以下引用重载方法的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Check this &#123;<span class="doctag">@link</span> #move(String) Move&#125; method for direction-oriented movement.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(String direction)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>move()</code>方法是指一种采用一个String参数的重载方法。</p><ol start="3"><li>引用另一个类中的方法<br>要引用另一个类中的方法，我们将使用类名，后跟标签，然后是方法名：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="meta">@link</span> ClassName#methodName() LabelName&#125;</span><br></pre></td></tr></table></figure>语法类似于引用同一类中的方法，除了在<code>#</code>符号之前提到类名。</li></ol><p>现在，让我们考虑在另一个类中引用方法的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Additionally, check this &#123;<span class="doctag">@link</span> Animal#run(String) Run&#125; method for direction based run.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>引用的方法在同一个包中的<code>Animal</code>类中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String direction)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果我们想引用另一个包中的方法，我们有两个选择。一种方法是直接指定包以及类名：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Also consider checking &#123;<span class="doctag">@link</span> com.baeldung.sealed.classes.Vehicle#Vehicle() Vehicle&#125; </span></span><br><span class="line"><span class="comment"> * constructor to initialize vehicle object.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goToWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这种情况下，已经使用完整的包名称提到了<code>Vehicle</code>类，以引用<code>Vehicle()</code>方法。</p><p>此外，我们可以导入包并单独提及类名：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baeldung.sealed.records.Car;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Have a look at &#123;<span class="doctag">@link</span> Car#getNumberOfSeats() SeatsAvailability&#125; </span></span><br><span class="line"><span class="comment"> * method for checking the available seats needed for driving.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drive</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里，驻留在另一个包中的<code>Car</code>类已被导入。所以，<code>@link</code>只需要包含类名和方法。</p><p>我们可以选择两种方式中的任何一种来引用不同包中的方法。如果是单次使用包，那么我们可以使用第一种方式，否则，如果有多个依赖项，我们应该选择第二种方式。</p><ol start="4"><li><code>@linkplain</code>标签<br>我们已经在注释中看到了用于引用方法的<code>@link Javadoc</code> 标记。<code>Javadoc</code> 提供了另一个名为<code>@linkplain</code> 的标记，用于在注释中引用方法，类似于<code>@link</code>标记。主要区别在于，在生成文档时，<code>@link</code>以等宽格式文本生成标签值，而<code>@linkplain</code>以标准格式（如纯文本）生成它。</li></ol><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemRpdGVjdC5jb20vbWFpbi1hZHZhbmNlZC9qYXZhL2phdmEtbWV0aG9kLWluLWphdmFkb2MuaHRtbA=="> 原文章地址 </span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近用到如何在注释中&lt;code&gt;link&lt;/code&gt;到另一个类&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;@link&lt;/code&gt;标签&lt;br&gt;&lt;code&gt;Javadoc&lt;/code&gt; 提供了&lt;code&gt;@link&lt;/code&gt;内联标记来引用Java 类中的成员。我们可以认为&lt;code&gt;@link&lt;/code&gt;标签类似于 &lt;code&gt;HTML&lt;/code&gt; 中的锚标签，用于通过超链接将一个页面链接到另一个页面。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;让我们看看使用&lt;code&gt;@link&lt;/code&gt;标记引用 &lt;code&gt;Javadoc&lt;/code&gt; 注释中的方法的语法：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;meta&quot;&gt;@link&lt;/span&gt; path_to_member label&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;与锚标签类似，&lt;code&gt;path_to_member&lt;/code&gt;是目的地，标签是显示文本。&lt;/p&gt;
&lt;p&gt;标签是可选的，但&lt;code&gt;path_to_member&lt;/code&gt;是引用方法所必需的。但是，始终使用标签名称来避免复杂的参考链接是一种很好的做法。&lt;code&gt;path_to_member&lt;/code&gt;的语法 根据我们引用的方法是否驻留在同一个类中而有所不同。&lt;/p&gt;
&lt;p&gt;需要注意的是，大括号&lt;code&gt;&amp;#123;&lt;/code&gt;和&lt;code&gt;@link&lt;/code&gt;之间不能有空格。如果它们之间有空格，&lt;code&gt;Javadoc &lt;/code&gt;工具将无法正确生成引用。但是， &lt;code&gt;path_to_member、label&lt;/code&gt;和右大括号之间没有空间限制。&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://smile1231.github.io/categories/Java/"/>
    
    
    <category term="Java" scheme="https://smile1231.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Springboot+Vue二进制文件传输</title>
    <link href="https://smile1231.github.io/posts/a1926332/"/>
    <id>https://smile1231.github.io/posts/a1926332/</id>
    <published>2022-05-21T13:42:10.000Z</published>
    <updated>2022-05-21T15:15:48.227Z</updated>
    
    <content type="html"><![CDATA[<p>最近用到了<code>springboot</code>项目返回二进制流，话不多说，代码贴上:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(value = &quot;/file/&#123;fileName&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;FileSystemResource&gt; <span class="title">getFile</span><span class="params">(<span class="meta">@PathVariable(&quot;fileName&quot;)</span> String fileName)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">File file = <span class="keyword">new</span> File(filePath, fileName);</span><br><span class="line"><span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line"><span class="keyword">return</span> export(file);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(file);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;FileSystemResource&gt; <span class="title">export</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (file == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">headers.add(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache, no-store, must-revalidate&quot;</span>);</span><br><span class="line">headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + file.getName());</span><br><span class="line">headers.add(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">headers.add(<span class="string">&quot;Expires&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">headers.add(<span class="string">&quot;Last-Modified&quot;</span>, <span class="keyword">new</span> Date().toString());</span><br><span class="line">headers.add(<span class="string">&quot;ETag&quot;</span>, String.valueOf(System.currentTimeMillis()));</span><br><span class="line"><span class="keyword">return</span> ResponseEntity.ok()</span><br><span class="line">                        .headers(headers)</span><br><span class="line">                        .contentLength(file.length())</span><br><span class="line">                        .contentType(MediaType.parseMediaType(<span class="string">&quot;application/octet-stream&quot;</span>))</span><br><span class="line">                        .body(<span class="keyword">new</span> FileSystemResource(file));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>前端<code>Vue</code>代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">downloadXLSXFile() &#123;</span><br><span class="line"><span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">that.axios</span><br><span class="line">.post(</span><br><span class="line"><span class="string">&quot;/download/XLSXExampleFile&quot;</span>,</span><br><span class="line">&#123; fileId: <span class="number">123</span> &#125;, <span class="comment">//入参</span></span><br><span class="line">&#123; responseType: <span class="string">&quot;blob&quot;</span> &#125; <span class="comment">// 设置responseType对象格式为 blob:</span></span><br><span class="line">)</span><br><span class="line">.then((res) =&gt; &#123;</span><br><span class="line">let blob = <span class="keyword">new</span> Blob([res.data], &#123;</span><br><span class="line">type: <span class="string">&quot;application/octet-stream&quot;</span>,</span><br><span class="line">&#125;); <span class="comment">// 获取请求返回的response对象中的blob 设置文件类型</span></span><br><span class="line"></span><br><span class="line">let url = window.URL.createObjectURL(blob); <span class="comment">// 创建一个临时的url指向blob对象</span></span><br><span class="line">let a = document.createElement(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">a.href = url;</span><br><span class="line">a.download = <span class="string">&quot;text.xslx&quot;</span>; <span class="comment">//下载的文件名</span></span><br><span class="line">a.click();</span><br><span class="line">window.URL.revokeObjectURL(url); <span class="comment">//释放blob对象</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>同时贴一个<code>Springboot</code>接受前端`Vue``对象参数</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/business&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubmitController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SubmitService submitService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/submit&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultVO <span class="title">submitAction</span><span class="params">(<span class="meta">@RequestBody</span> UploadFileSubmitEntity uploadFileSubmitEntity)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;start submitAction ...&quot;</span>);</span><br><span class="line">        log.info(uploadFileSubmitEntity.toString());</span><br><span class="line">        <span class="keyword">return</span> submitService.submitAction(uploadFileSubmitEntity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadFileSubmitEntity</span> </span>&#123;</span><br><span class="line">    <span class="comment">//gz 文件列表</span></span><br><span class="line">    <span class="meta">@JsonProperty(&quot;GZFileList&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;UploadRes&gt; GZFileList;</span><br><span class="line">    <span class="comment">//xlsx 文件列表</span></span><br><span class="line">    <span class="meta">@JsonProperty(&quot;XLSXFileList&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;UploadRes&gt; XLSXFileList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前端:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line"><span class="keyword">var</span> param = &#123;</span><br><span class="line"><span class="string">&quot;GZFileList&quot;</span>: <span class="built_in">this</span>.GZFileList,</span><br><span class="line"><span class="string">&quot;XLSXFileList&quot;</span>: <span class="built_in">this</span>.XLSXFileList,</span><br><span class="line">&#125;;</span><br><span class="line">that.axios(&#123;</span><br><span class="line"><span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line"><span class="attr">url</span>: <span class="string">&quot;/business/submit&quot;</span>,</span><br><span class="line"><span class="attr">data</span>: <span class="built_in">JSON</span>.stringify(param),</span><br><span class="line"><span class="attr">headers</span>: &#123;</span><br><span class="line"><span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(res.data.code == <span class="number">200</span>)&#123;</span><br><span class="line">that.$message.success(<span class="string">&quot;submit successfully! , Plz wait for some time .&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近用到了&lt;code&gt;springboot&lt;/code&gt;项目返回二进制流，话不多说，代码贴上:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@PostMapping(value = &amp;quot;/file/&amp;#123;fileName&amp;#125;&amp;quot;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; ResponseEntity&amp;lt;FileSystemResource&amp;gt; &lt;span class=&quot;title&quot;&gt;getFile&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;meta&quot;&gt;@PathVariable(&amp;quot;fileName&amp;quot;)&lt;/span&gt; String fileName)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; FileNotFoundException &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	File file = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; File(filePath, fileName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (file.exists()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; export(file);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	System.out.println(file);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; ResponseEntity&amp;lt;FileSystemResource&amp;gt; &lt;span class=&quot;title&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(File file)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (file == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	HttpHeaders headers = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HttpHeaders();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;Cache-Control&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;no-cache, no-store, must-revalidate&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;Content-Disposition&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;attachment; filename=&amp;quot;&lt;/span&gt; + file.getName());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;Pragma&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;no-cache&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;Expires&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;Last-Modified&amp;quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Date().toString());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	headers.add(&lt;span class=&quot;string&quot;&gt;&amp;quot;ETag&amp;quot;&lt;/span&gt;, String.valueOf(System.currentTimeMillis()));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; ResponseEntity.ok()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        .headers(headers)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        .contentLength(file.length())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        .contentType(MediaType.parseMediaType(&lt;span class=&quot;string&quot;&gt;&amp;quot;application/octet-stream&amp;quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        .body(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FileSystemResource(file));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="SpringBoot" scheme="https://smile1231.github.io/tags/SpringBoot/"/>
    
    <category term="文件上传" scheme="https://smile1231.github.io/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    
  </entry>
  
  <entry>
    <title>文件上传前端小结</title>
    <link href="https://smile1231.github.io/posts/7733848a/"/>
    <id>https://smile1231.github.io/posts/7733848a/</id>
    <published>2022-05-21T13:24:07.000Z</published>
    <updated>2022-05-21T15:15:48.229Z</updated>
    
    <content type="html"><![CDATA[<h2 id="页面a标签-点击不跳转"><a href="#页面a标签-点击不跳转" class="headerlink" title="页面a标签 点击不跳转"></a>页面<code>a</code>标签 点击不跳转</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">href=&quot;javascript:viod(0)&quot;</span><br><span class="line"></span><br><span class="line">href=&quot;javascript:;&quot;</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;页面a标签-点击不跳转&quot;&gt;&lt;a href=&quot;#页面a标签-点击不跳转&quot; class=&quot;headerlink&quot; title=&quot;页面a标签 点击不跳转&quot;&gt;&lt;/a&gt;页面&lt;code&gt;a&lt;/code&gt;标签 点击不跳转&lt;/h2&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;href=&amp;quot;javascript:viod(0)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;href=&amp;quot;javascript:;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="前端" scheme="https://smile1231.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://smile1231.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Vue" scheme="https://smile1231.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>The learning of Shell</title>
    <link href="https://smile1231.github.io/posts/55b095e0/"/>
    <id>https://smile1231.github.io/posts/55b095e0/</id>
    <published>2022-05-10T15:35:17.000Z</published>
    <updated>2022-06-01T12:53:31.923Z</updated>
    
    <content type="html"><![CDATA[<p>Nowdays , i hava a task about how to use shell script ,so it is time to learn shell .</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vamluZ21veHVrb25nL3AvNzg2NzM5Ny5odG1s"> shell  入门 </span></p><p><span class="exturl" data-url="aHR0cDovL3Rvb2wucmJ0cmVlLmNuLw=="> 好用的工具网站 </span></p><span id="more"></span><h2 id="ALL"><a href="#ALL" class="headerlink" title="ALL"></a><code>ALL</code></h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tYW5kLW1hbnVhbC5odG1s">https://www.runoob.com/linux/linux-command-manual.html</span></p><h2 id="zip和upzip"><a href="#zip和upzip" class="headerlink" title="zip和upzip"></a><code>zip</code>和<code>upzip</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zip命令的选项说明</span></span><br><span class="line"><span class="comment"># -A：调整可执行的自动解压缩文件。</span></span><br><span class="line"><span class="comment"># -b&lt;工作目录&gt;：指定暂时存放文件的目录。</span></span><br><span class="line"><span class="comment"># -c：替每个被压缩的文件加上注释。</span></span><br><span class="line"><span class="comment"># -d：从压缩文件内删除指定的文件。</span></span><br><span class="line"><span class="comment"># -D：压缩文件内不建立目录名称。</span></span><br><span class="line"><span class="comment"># -f：此参数的效果和指定&quot;-u&quot;参数类似，但不仅更新既有文件，如果某些文件原本不存在于压缩文件内，使用本参数会一并将其加入压缩文件中。</span></span><br><span class="line"><span class="comment"># -F：尝试修复已损坏的压缩文件。</span></span><br><span class="line"><span class="comment"># -g：将文件压缩后附加在既有的压缩文件之后，而非另行建立新的压缩文件。</span></span><br><span class="line"><span class="comment"># -h：在线帮助。</span></span><br><span class="line"><span class="comment"># -i&lt;范本样式&gt;：只压缩符合条件的文件。</span></span><br><span class="line"><span class="comment"># -j：只保存文件名称及其内容，而不存放任何目录名称。</span></span><br><span class="line"><span class="comment"># -J：删除压缩文件前面不必要的数据。</span></span><br><span class="line"><span class="comment"># -k：使用MS-DOS兼容格式的文件名称。</span></span><br><span class="line"><span class="comment"># -l：压缩文件时，把LF字符置换成LF+CR字符。</span></span><br><span class="line"><span class="comment"># -ll：压缩文件时，把LF+CR字符置换成LF字符。</span></span><br><span class="line"><span class="comment"># -L：显示版权信息。</span></span><br><span class="line"><span class="comment"># -m：将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。</span></span><br><span class="line"><span class="comment"># -n&lt;字尾字符串&gt;：不压缩具有特定字尾字符串的文件。</span></span><br><span class="line"><span class="comment"># -o：以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同。</span></span><br><span class="line"><span class="comment"># -q：不显示指令执行过程。</span></span><br><span class="line"><span class="comment"># -r：递归处理，将指定目录下的所有文件和子目录一并处理。</span></span><br><span class="line"><span class="comment"># -S：包含系统和隐藏文件。</span></span><br><span class="line"><span class="comment"># -t&lt;日期时间&gt;：把压缩文件的日期设成指定的日期。</span></span><br><span class="line"><span class="comment"># -T：检查备份文件内的每个文件是否正确无误。</span></span><br><span class="line"><span class="comment"># -u：更换较新的文件到压缩文件内。</span></span><br><span class="line"><span class="comment"># -v：显示指令执行过程或显示版本信息。</span></span><br><span class="line"><span class="comment"># -V：保存VMS操作系统的文件属性。</span></span><br><span class="line"><span class="comment"># -w：在文件名称里假如版本编号，本参数仅在VMS操作系统下有效。</span></span><br><span class="line"><span class="comment"># -x&lt;范本样式&gt;：压缩时排除符合条件的文件。</span></span><br><span class="line"><span class="comment"># -X：不保存额外的文件属性。</span></span><br><span class="line"><span class="comment"># -y：直接保存符号连接，而非该连接所指向的文件，本参数仅在UNIX之类的系统下有效。</span></span><br><span class="line"><span class="comment"># -z：替压缩文件加上注释。</span></span><br><span class="line"><span class="comment"># -$：保存第一个被压缩文件所在磁盘的卷册名称。</span></span><br><span class="line"><span class="comment"># -&lt;压缩效率&gt;：压缩效率是一个介于1-9的数值。</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$zip</span> -m new_zip_name old_filename</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压到当前目录 如果文件已存在，会提示是否替换，可以使用 -o 或 -n 参数简化交互；</span></span><br><span class="line"><span class="variable">$unzip</span> test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压到指定目录 解压后的文件路径:/&#123;targetPath&#125;/test</span></span><br><span class="line"><span class="variable">$unzip</span> -d &#123;targetPath&#125; test.zip </span><br><span class="line"></span><br><span class="line"><span class="comment"># 不覆盖已经存在的文件</span></span><br><span class="line"><span class="variable">$unzip</span> -n test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment">#强制覆盖已经存在的文件</span></span><br><span class="line"><span class="variable">$unzip</span> -o test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看压缩包中的文件列表</span></span><br><span class="line"><span class="comment"># 文件大小、时间、文件名称 不进行解压缩</span></span><br><span class="line"><span class="variable">$unzip</span> -l test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看压缩包中的文件信息【更详细】 </span></span><br><span class="line"><span class="comment"># 文件大小、压缩比、日期、文件名称</span></span><br><span class="line"><span class="variable">$unzip</span> -v test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查压缩包是否损坏</span></span><br><span class="line"><span class="variable">$unzip</span> -t test.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示压缩文件的备注</span></span><br><span class="line"><span class="variable">$unzip</span> -z test.zip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行解压不显示任何信息</span></span><br><span class="line"><span class="variable">$unzip</span> -q test.zip</span><br><span class="line"><span class="variable">$unzip</span> -oq test.zip <span class="comment"># 静默解压没有任何提示</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Bash-shell脚本打印出正在执行的命令"><a href="#Bash-shell脚本打印出正在执行的命令" class="headerlink" title="Bash shell脚本打印出正在执行的命令"></a><code>Bash shell</code>脚本打印出正在执行的命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认情况下，bash脚本不会打印执行的每个命令，这个有时候不太方面。</span></span><br><span class="line"><span class="comment"># 如下的方法可以让bash脚本打印出执行的命令：</span></span><br><span class="line">1） 在脚本里添加 </span><br><span class="line">    <span class="built_in">set</span> -v 或者</span><br><span class="line">    <span class="comment">#!/bin/bash -v</span></span><br><span class="line"></span><br><span class="line">    以加 <span class="built_in">set</span> -v 最好。</span><br><span class="line"></span><br><span class="line">    <span class="built_in">set</span> -v  和 <span class="built_in">set</span> -o verbose  是一样的</span><br><span class="line"></span><br><span class="line">2) 添加</span><br><span class="line">    <span class="built_in">set</span> -x </span><br><span class="line"></span><br><span class="line">    或者</span><br><span class="line">    <span class="comment">#!/bin/bash -x</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="sed指令"><a href="#sed指令" class="headerlink" title="sed指令"></a><code>sed</code>指令</h2><p><span class="exturl" data-url="aHR0cDovL2MuYmlhbmNoZW5nLm5ldC92aWV3LzQwMjguaHRtbA=="> 参考地址 </span></p><p><code>sed</code> 命令的基本格式如下：<code>sed [选项] [脚本命令] 文件名</code></p><p>该命令常用的选项及含义:</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td><code>-e</code></td><td>脚本命令    该选项会将其后跟的脚本命令添加到已有的命令中。</td></tr><tr><td><code>-f</code></td><td>脚本命令文件    该选项会将其后文件中的脚本命令添加到已有的命令中。</td></tr><tr><td><code>-n</code></td><td>默认情况下，<code>sed</code> 会在所有的脚本指定执行完毕后，会自动输出处理后的内容，而该选项会屏蔽启动输出，需使用 <code>print</code> 命令来完成输出。</td></tr><tr><td><code>-i</code></td><td>此选项会直接修改源文件，要慎用。</td></tr></tbody></table><h3 id="sed-s-替换脚本命令"><a href="#sed-s-替换脚本命令" class="headerlink" title="sed s 替换脚本命令"></a><code>sed s </code>替换脚本命令</h3><p>此命令的基本格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 其中，address 表示指定要操作的具体行，pattern 指的是需要替换的内容，replacement 指的是要替换的新内容。</span></span><br><span class="line">[address]s/pattern/replacement/flags</span><br></pre></td></tr></table></figure><p>其中<code>flag</code>:</p><table><thead><tr><th><code>flags</code> 标记</th><th>功能</th></tr></thead><tbody><tr><td><code>n</code></td><td><code>1~512</code> 之间的数字，表示指定要替换的字符串出现第几次时才进行替换，例如，一行中有 <code>3</code> 个 <code>A</code>，但用户只想替换第二个 <code>A</code>，这是就用到这个标记；</td></tr><tr><td><code>g</code></td><td>对数据中所有匹配到的内容进行替换，如果没有 <code>g</code>，则只会在第一次匹配成功时做替换操作。例如，一行数据中有 <code>3</code> 个 <code>A</code>，则只会替换第一个 <code>A</code>；</td></tr><tr><td><code>p</code></td><td>会打印与替换命令中指定的模式匹配的行。此标记通常与 <code>-n</code> 选项一起使用。</td></tr><tr><td><code>w file</code></td><td>将缓冲区中的内容写到指定的 <code>file</code> 文件中；</td></tr><tr><td><code>&amp;</code></td><td>用正则表达式匹配的内容进行替换；</td></tr><tr><td><code>\n</code></td><td>匹配第 <code>n</code> 个子串，该子串之前在 <code>pattern</code> 中用 () 指定。</td></tr><tr><td><code>\</code></td><td>转义（转义替换部分包含：<code>&amp;、\</code> 等）。</td></tr></tbody></table><blockquote><p><code>tips</code>  – 需要转义的一些字符:</p></blockquote><img data-src="/posts/55b095e0/2022-05-13-00-07-09.png" class=""><ol><li><p>比如，可以指定 <code>sed</code> 用新文本替换第几处模式匹配的地方：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;s/test/trial/2&#x27;</span> data4.txt</span><br><span class="line">This is a <span class="built_in">test</span> of the trial script.</span><br><span class="line">This is the second <span class="built_in">test</span> of the trial script.</span><br></pre></td></tr></table></figure><p> 可以看到，使用数字 <code>2</code> 作为标记的结果就是，<code>sed</code> 编辑器只替换每行中第 <code>2</code> 次出现的匹配模式。</p></li><li><p>如果要用新文件替换所有匹配的字符串，可以使用 <code>g</code> 标记：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;s/test/trial/g&#x27;</span> data4.txt</span><br><span class="line">This is a trial of the trial script.</span><br><span class="line">This is the second trial of the trial script.</span><br></pre></td></tr></table></figure></li><li><p>我们知道，<code>-n</code> 选项会禁止 <code>sed</code> 输出，但 <code>p</code> 标记会输出修改过的行，将二者匹配使用的效果就是只输出被替换命令修改过的行，例如：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cat</span> data5.txt</span><br><span class="line">This is a <span class="built_in">test</span> line.</span><br><span class="line">This is a different line.</span><br><span class="line"><span class="variable">$sed</span> -n <span class="string">&#x27;s/test/trial/p&#x27;</span> data5.txt</span><br><span class="line">This is a trial line.</span><br></pre></td></tr></table></figure></li><li><p><code>w</code> 标记会将匹配后的结果保存到指定文件中，比如：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;s/test/trial/w test.txt&#x27;</span> data5.txt</span><br><span class="line">This is a trial line.</span><br><span class="line">This is a different line.</span><br><span class="line"><span class="variable">$#cat</span> test.txt</span><br><span class="line">This is a trial line.</span><br></pre></td></tr></table></figure></li><li><p>在使用 <code>s</code> 脚本命令时，替换类似文件路径的字符串会比较麻烦，需要将路径中的正斜线进行转义，例如：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/\/bin\/bash/\/bin\/csh/&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure><h3 id="sed-d-替换脚本命令"><a href="#sed-d-替换脚本命令" class="headerlink" title="sed d 替换脚本命令"></a><code>sed d</code> 替换脚本命令</h3><p>此命令的基本格式为：<code>[address]d</code></p></li></ol><p>如果需要删除文本中的特定行，可以用 <code>d</code> 脚本命令，它会删除指定行中的所有内容。但使用该命令时要特别小心，如果你忘记指定具体行的话，文件中的所有内容都会被删除，举个例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cat</span> data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;d&#x27;</span> data1.txt</span><br><span class="line"><span class="comment">#什么也不输出，证明成了空文件</span></span><br></pre></td></tr></table></figure><ol><li><p>通过行号指定，比如删除 <code>data6.txt</code> 文件内容中的第 <code>3</code> 行：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cat</span> data6.txt</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;3d&#x27;</span> data6.txt</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 4.</span><br></pre></td></tr></table></figure></li><li><p>或者通过特定行区间指定，比如删除 <code>data6.txt</code> 文件内容中的第 <code>2、3</code> 行：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;2,3d&#x27;</span> data6.txt</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 4.</span><br></pre></td></tr></table></figure></li><li><p>也可以使用两个文本模式来删除某个区间内的行，但这么做时要小心，你指定的第一个模式会“打开”行删除功能，第二个模式会“关闭”行删除功能，因此，<code>sed</code> 会删除两个指定行之间的所有行（包括指定的行），例如：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;/1/,/3/d&#x27;</span> data6.txt</span><br><span class="line"><span class="comment">#删除第 1~3 行的文本数据</span></span><br><span class="line">This is line number 4.</span><br></pre></td></tr></table></figure></li><li><p>或者通过特殊的文件结尾字符，比如删除 <code>data6.txt</code> 文件内容中第 <code>3</code> 行开始的所有的内容：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sed</span> <span class="string">&#x27;3,$d&#x27;</span> data6.txt</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br></pre></td></tr></table></figure></li></ol><p>在此强调，在默认情况下 <code>sed</code> 并不会修改原始文件，这里被删除的行只是从 <code>sed</code> 的输出中消失了，原始文件没做任何改变。</p><p><span class="exturl" data-url="aHR0cDovL2MuYmlhbmNoZW5nLm5ldC92aWV3LzQwMjguaHRtbA=="> 完整版参考地址 </span></p><h2 id="Grep指令"><a href="#Grep指令" class="headerlink" title="Grep指令"></a><code>Grep</code>指令</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tLWdyZXAuaHRtbA=="> 菜鸟链接 </span></p><h2 id="awk指令"><a href="#awk指令" class="headerlink" title="awk指令"></a><code>awk</code>指令</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tLWF3ay5odG1s"> 菜鸟链接 </span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZ2dqdWNoZW5nL2FyY2hpdmUvMjAxMy8wMS8xMy8yODU4NDcwLmh0bWw="> good 1 </span></p><h2 id="cut指令"><a href="#cut指令" class="headerlink" title="cut指令"></a><code>cut</code>指令</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tLWN1dC5odG1s"> 菜鸟链接 </span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWxvbmcyMS9wLzEwMzY2ODg2Lmh0bWw="> 三剑客链接 </span></p><h2 id="JSON格式化工具jq指令"><a href="#JSON格式化工具jq指令" class="headerlink" title="JSON格式化工具jq指令"></a><code>JSON</code>格式化工具<code>jq</code>指令</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2V2aW5ncmFjZS9wLzc1NjUzNzEuaHRtbA=="> 参考链接 </span></p><h2 id="awk内置函数-split-substr-length-gsub"><a href="#awk内置函数-split-substr-length-gsub" class="headerlink" title="awk内置函数(split/substr/length/gsub)"></a><code>awk</code>内置函数<code>(split/substr/length/gsub)</code></h2><p>一、<code>split</code> 初始化和类型强制</p><p><code>awk</code>的内建函数<code>split</code>允许你把一个字符串分隔为单词并存储在数组中。你可以自己定义域分隔符或者使用现在<code>FS(域分隔符)</code>的值。<br>格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">split (string, array, field separator)</span><br><span class="line">split (string, array) –&gt;如果第三个参数没有提供，awk就默认使用当前FS值。</span><br></pre></td></tr></table></figure><blockquote><p>例子：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash  </span></span><br><span class="line">time=<span class="string">&quot;12:34:56&quot;</span>  </span><br><span class="line">out=`<span class="built_in">echo</span> <span class="variable">$time</span> | awk <span class="string">&#x27;&#123;split($0,a,&quot;:&quot;);print a[1],a[2],a[3]&#125;&#x27;</span>`  </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$out</span>  </span><br><span class="line"><span class="comment">#输出：</span></span><br><span class="line"><span class="comment">#12 34 56  </span></span><br></pre></td></tr></table></figure><p>计算指定范围内的和(计算每个人<code>1</code>月份的工资之和)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test.txt:</span></span><br><span class="line"><span class="comment"># Tom　　  2012-12-11      car     53000  </span></span><br><span class="line"><span class="comment"># John　　 2013-01-13      bike    41000  </span></span><br><span class="line"><span class="comment"># vivi    2013-01-18      car     42800  </span></span><br><span class="line"><span class="comment"># Tom　　  2013-01-20      car     32500  </span></span><br><span class="line"><span class="comment"># John　　 2013-01-28      bike    63500  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#`awk`处理命令：</span></span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;&#123;split($2,a,&quot;-&quot;);if(a[2]==01)&#123;b[$1]=b[$1]+$4&#125;&#125;END&#123;for(i in b)print i,b[i]&#125;&#x27;</span> test.txt   </span><br><span class="line"><span class="comment">#输出结果：</span></span><br><span class="line"><span class="comment"># Tom　　 32500  </span></span><br><span class="line"><span class="comment"># vivi 42800  </span></span><br><span class="line"><span class="comment"># John　　 104500  </span></span><br></pre></td></tr></table></figure><p>二、<code>substr</code> 截取字符串</p><p>返回从起始位置起，指定长度之子字符串；若未指定长度，则返回从起始位置到字符串末尾的子字符串。<br>格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">substr(s,p) 返回字符串s中从p开始的后缀部分</span><br><span class="line">substr(s,p,n) 返回字符串s中从p开始长度为n的后缀部分</span><br></pre></td></tr></table></figure><blockquote><p>例子：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | awk <span class="string">&#x27;&#123;print substr($0,2,2)&#125;&#x27;</span>  </span><br><span class="line"><span class="comment">#输出结果：</span></span><br><span class="line"><span class="comment"># bc  </span></span><br><span class="line"><span class="comment"># 解释：</span></span><br><span class="line"><span class="comment"># awk -F &#x27;,&#x27; &#x27;&#123;print substr($3,6)&#125;&#x27;    ---&gt;  表示是从第3个字段里的第6个字符开始，一直到设定的分隔符&quot;,&quot;结束.</span></span><br><span class="line"><span class="comment"># substr($3,10,8)  ---&gt;  表示是从第3个字段里的第10个字符开始，截取8个字符结束.</span></span><br><span class="line"><span class="comment"># substr($3,6)     ---&gt;  表示是从第3个字段里的第6个字符开始，一直到结尾</span></span><br></pre></td></tr></table></figure><p>三、<code>length</code> 字符串长度</p><p><code>length</code>函数返回没有参数的字符串的长度。<code>length</code>函数返回整个记录中的字符数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | awk <span class="string">&#x27;&#123;print length&#125;&#x27;</span>   </span><br><span class="line"><span class="comment"># 结果：</span></span><br><span class="line"><span class="comment"># 3  </span></span><br></pre></td></tr></table></figure><p>四、<code>gsub</code>函数</p><p>gsub函数则使得在所有正则表达式被匹配的时候都发生替换。<code>gsub(regular expression, subsitution string, target string);简称 gsub（r,s,t)</code>。</p><p>举例：把一个文件里面所有包含 <code>abc</code> 的行里面的 <code>abc</code> 替换成 <code>def</code>，然后输出第一列和第三列</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;abc cde abr&quot;</span> | awk <span class="string">&#x27;$0 ~ /abc/ &#123;gsub(&quot;abc&quot;,&quot;def&quot;,$0); print $1, $3&#125;&#x27;</span>  </span><br><span class="line"><span class="comment"># 输出结果：</span></span><br><span class="line"><span class="comment"># def abr </span></span><br></pre></td></tr></table></figure><h2 id="Linux-shell-将字符串分割成数组"><a href="#Linux-shell-将字符串分割成数组" class="headerlink" title="Linux shell 将字符串分割成数组"></a><code>Linux shell</code> 将字符串分割成数组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="string">&quot;one,two,three,four&quot;</span></span><br><span class="line"><span class="comment"># 要将$a分割开，可以这样：</span></span><br><span class="line"></span><br><span class="line">OLD_IFS=<span class="string">&quot;<span class="variable">$IFS</span>&quot;</span></span><br><span class="line">IFS=<span class="string">&quot;,&quot;</span></span><br><span class="line">arr=(<span class="variable">$a</span>)</span><br><span class="line">IFS=<span class="string">&quot;<span class="variable">$OLD_IFS</span>&quot;</span></span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> <span class="variable">$&#123;arr[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$s</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># arr=($a)用于将字符串$a分割到数组$arr $&#123;arr[0]&#125; $&#123;arr[1]&#125; ... 分别存储分割后的数组第1 2 ... 项 ，$&#123;arr[@]&#125;存储整个数组。变量$IFS存储着分隔符，这里我们将其设为逗号 &quot;,&quot; OLD_IFS用于备份默认的分隔符，使用完后将之恢复默认。</span></span><br></pre></td></tr></table></figure><h2 id="linux截取中间字符串-shell截取指定字符串之间的内容"><a href="#linux截取中间字符串-shell截取指定字符串之间的内容" class="headerlink" title="linux截取中间字符串,shell截取指定字符串之间的内容"></a><code>linux</code>截取中间字符串,<code>shell</code>截取指定字符串之间的内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#截取字符串</span></span><br><span class="line"><span class="comment">#path=ss/usr/share/src/root/home/admin</span></span><br><span class="line">path=ss/usr/share/src/root/home/admin/src/add</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$path</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path%src*&#125;</span> <span class="comment">#从右向左截取第一个 src 后的字符串</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path%/*&#125;</span>从右向左截取 第一个 / 后的字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path%%/*&#125;</span>从右向左截取 最后一个 / 后的字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path#*/&#125;</span>从左向右截取第一个 / 后的字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path##*/&#125;</span>从左向右截取最后一个 / 后的字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path:3&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path:6:60&#125;</span>截取变量path从前三个字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#path&#125;</span>计算 path变量 一共有几个字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path/root/kyo&#125;</span>把path变量里的第一个root字符串，替换为 kyo字符串</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path//s/m&#125;</span>把path变量里的所有的s字符，替换为 m 字符</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;path&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Shell环境生成UUID"><a href="#Shell环境生成UUID" class="headerlink" title="Shell环境生成UUID"></a><code>Shell</code>环境生成<code>UUID</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UUID=$(uuidgen |sed <span class="string">&#x27;s/-//g&#x27;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$UUID</span></span><br><span class="line"><span class="comment"># 918c61bd48914f0e8fb1295208b6e87e</span></span><br></pre></td></tr></table></figure><h2 id="Shell中-各种含义"><a href="#Shell中-各种含义" class="headerlink" title="Shell中$ 各种含义"></a><code>Shell</code>中<code>$</code> 各种含义</h2><table><thead><tr><th>符 号</th><th>含 义</th></tr></thead><tbody><tr><td><code>$0</code></td><td>脚本名</td></tr><tr><td><code>$#</code></td><td>参数个数</td></tr><tr><td><code>$n</code></td><td>传递给脚本的参数值，<code>$1</code>第<code>1</code>参数、<code>$2</code>第<code>2</code>参数</td></tr><tr><td><code>$?</code></td><td>上次退出的状态（返回值），<code>0</code>没有错误，<code>1</code>错误</td></tr><tr><td><code>$*</code></td><td>所有参数列表。<code>&quot;$*&quot;</code>时，是<code>&quot;$1 $2 … $n&quot;</code>的形式</td></tr><tr><td><code>$@</code></td><td>所有参数列表。<code>&quot;$@&quot;</code>时，是<code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot; </code>的形式</td></tr><tr><td><code>$$</code></td><td>当前进程的编号<code>（ProcessID）</code></td></tr><tr><td><code>$!</code></td><td><code>shell</code>最后运行的后台<code>Process</code>的<code>PID</code></td></tr><tr><td><code>$var</code></td><td>变量，会与后面的连接，如<code>$var_a</code>，会当做变量<code>var_a</code></td></tr><tr><td><code>$&#123;var&#125;</code></td><td>变量，界定范围</td></tr><tr><td><code>$()</code></td><td>与<code>(反引号)类似，里面执行完再返回值，</code>所有<code>shell</code>通用</td></tr><tr><td><code>$[]</code></td><td>可进行算术运算和逻辑运算，不支持浮点和字符串</td></tr><tr><td><code>$(())</code></td><td>可进行算术运算和逻辑运算，不支持浮点和字符串。里面的变量可以省略<code>$</code></td></tr></tbody></table><h2 id="linux-下shell中if的“-e，-d，-f”是什么意思"><a href="#linux-下shell中if的“-e，-d，-f”是什么意思" class="headerlink" title="linux 下shell中if的“-e，-d，-f”是什么意思"></a><code>linux</code> 下<code>shell</code>中<code>if</code>的<code>“-e，-d，-f”</code>是什么意思</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">文件表达式</span><br><span class="line">-e filename 如果 filename存在，则为真</span><br><span class="line">-d filename 如果 filename为目录，则为真 </span><br><span class="line">-f filename 如果 filename为常规文件，则为真</span><br><span class="line">-L filename 如果 filename为符号链接，则为真</span><br><span class="line">-r filename 如果 filename可读，则为真 </span><br><span class="line">-w filename 如果 filename可写，则为真 </span><br><span class="line">-x filename 如果 filename可执行，则为真</span><br><span class="line">-s filename 如果文件长度不为0，则为真</span><br><span class="line">-h filename 如果文件是软链接，则为真</span><br><span class="line">filename1 -nt filename2 如果 filename1比 filename2新，则为真。</span><br><span class="line">filename1 -ot filename2 如果 filename1比 filename2旧，则为真。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">整数变量表达式</span><br><span class="line">-eq 等于</span><br><span class="line">-ne 不等于</span><br><span class="line">-gt 大于</span><br><span class="line">-ge 大于等于</span><br><span class="line">-lt 小于</span><br><span class="line">-le 小于等于</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">字符串变量表达式</span><br><span class="line">If  [ <span class="variable">$a</span> = <span class="variable">$b</span> ]                 如果string1等于string2，则为真</span><br><span class="line">                                字符串允许使用赋值号做等号</span><br><span class="line"><span class="keyword">if</span>  [ <span class="variable">$string1</span> !=  <span class="variable">$string2</span> ]   如果string1不等于string2，则为真       </span><br><span class="line"><span class="keyword">if</span>  [ -n <span class="variable">$string</span>  ]             如果string 非空(非0），返回0(<span class="literal">true</span>)  </span><br><span class="line"><span class="keyword">if</span>  [ -z <span class="variable">$string</span>  ]             如果string 为空，则为真</span><br><span class="line"><span class="keyword">if</span>  [ <span class="variable">$sting</span> ]                  如果string 非空，返回0 (和-n类似) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    逻辑非 !                   条件表达式的相反</span><br><span class="line"><span class="keyword">if</span> [ ! 表达式 ]</span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="variable">$num</span> ]               如果不存在目录<span class="variable">$num</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    逻辑与 –a                   条件表达式的并列</span><br><span class="line"><span class="keyword">if</span> [ 表达式1  –a  表达式2 ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    逻辑或 -o                   条件表达式的或</span><br><span class="line"><span class="keyword">if</span> [ 表达式1  –o 表达式2 ]</span><br></pre></td></tr></table></figure><h2 id="shell获取文件扩展名"><a href="#shell获取文件扩展名" class="headerlink" title="shell获取文件扩展名"></a><code>shell</code>获取文件扩展名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">basename example.tar.a.b.c.gz .c.gz</span><br><span class="line"><span class="comment"># =&gt; example.tar.a.b</span></span><br><span class="line"> </span><br><span class="line">FILE=<span class="string">&quot;example.tar.gz&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;FILE%%.*&#125;</span>&quot;</span>     取头   example </span><br><span class="line"><span class="comment"># =&gt; example</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;FILE%.*&#125;</span>&quot;</span>      去尾   example.tar.a.b.c</span><br><span class="line"><span class="comment"># =&gt; example.tar</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;FILE#*.&#125;</span>&quot;</span>      去头   tar.a.b.c.gz</span><br><span class="line"><span class="comment"># =&gt; tar.gz</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;FILE##*.&#125;</span>&quot;</span>     取尾   gz</span><br><span class="line"><span class="comment"># =&gt; gz</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 在bash中可以这么写</span></span><br><span class="line">filename=$(basename <span class="string">&quot;<span class="variable">$fullfile</span>&quot;</span>)   </span><br><span class="line">extension=<span class="string">&quot;<span class="variable">$&#123;filename##*.&#125;</span>&quot;</span></span><br><span class="line">filename=<span class="string">&quot;<span class="variable">$&#123;filename%.*&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Linux-shell-中获取当前目录的方法"><a href="#Linux-shell-中获取当前目录的方法" class="headerlink" title="Linux shell 中获取当前目录的方法"></a><code>Linux shell</code> 中获取当前目录的方法</h2><blockquote><p>当前目录</p></blockquote><p>每当你在终端进行操作时，你都会有一个当前工作目录。 使用pwd来判定当前目录在文件系统内的确切位置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure><p>在<code>shell</code>中也可以使用<code>pwd</code>来获取当前目录，并赋值给变量。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">CRTDIR=$(<span class="built_in">pwd</span>)</span><br></pre></td></tr></table></figure><blockquote><p>工作目录</p></blockquote><p>获取当前执行的脚本文件的父目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workdir=$(<span class="built_in">cd</span> $(dirname <span class="variable">$0</span>); <span class="built_in">pwd</span>)</span><br></pre></td></tr></table></figure><blockquote><p>复杂点的工作目录获取</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PRG=<span class="string">&quot;<span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="keyword">while</span> [ -h <span class="string">&quot;<span class="variable">$PRG</span>&quot;</span> ] ; <span class="keyword">do</span></span><br><span class="line">  ls=`ls -ld <span class="string">&quot;<span class="variable">$PRG</span>&quot;</span>`</span><br><span class="line">  link=`expr <span class="string">&quot;<span class="variable">$ls</span>&quot;</span> : <span class="string">&#x27;.*-&gt; \(.*\)$&#x27;</span>`</span><br><span class="line">  <span class="keyword">if</span> expr <span class="string">&quot;<span class="variable">$link</span>&quot;</span> : <span class="string">&#x27;/.*&#x27;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    PRG=<span class="string">&quot;<span class="variable">$link</span>&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    PRG=`dirname <span class="string">&quot;<span class="variable">$PRG</span>&quot;</span>`/<span class="string">&quot;<span class="variable">$link</span>&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">PRGDIR=$(<span class="built_in">cd</span> $(dirname <span class="variable">$PRG</span>); <span class="built_in">pwd</span>)</span><br></pre></td></tr></table></figure><h2 id="Linux-Shell获取文件夹下的文件名"><a href="#Linux-Shell获取文件夹下的文件名" class="headerlink" title="Linux Shell获取文件夹下的文件名"></a><code>Linux Shell</code>获取文件夹下的文件名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># get all filename in specified path</span></span><br><span class="line">path=<span class="variable">$1</span></span><br><span class="line">files=$(ls <span class="variable">$path</span>)</span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> <span class="variable">$files</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$filename</span> &gt;&gt; filename.txt</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="shell获取目录下所有文件夹的名称并输出"><a href="#shell获取目录下所有文件夹的名称并输出" class="headerlink" title="shell获取目录下所有文件夹的名称并输出"></a><code>shell</code>获取目录下所有文件夹的名称并输出</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#方法一 </span></span><br><span class="line">dir=$(ls -l /usr/ |awk <span class="string">&#x27;/^d/ &#123;print $NF&#125;&#x27;</span>)</span><br><span class="line">or i <span class="keyword">in</span> <span class="variable">$dir</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span>   </span><br><span class="line"><span class="comment">#######</span></span><br><span class="line"><span class="comment">#方法二</span></span><br><span class="line"><span class="keyword">for</span> dir <span class="keyword">in</span> $(ls /usr/)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    [ -d <span class="variable">$dir</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="variable">$dir</span></span><br><span class="line"><span class="keyword">done</span>        </span><br><span class="line"><span class="comment">##方法三</span></span><br><span class="line">ls -l /usr/ |awk <span class="string">&#x27;/^d/ &#123;print $NF&#125;&#x27;</span>   <span class="comment">## 其实同方法一，直接就可以显示不用for循环</span></span><br></pre></td></tr></table></figure><h2 id="常用-Linux-jq命令语法整理"><a href="#常用-Linux-jq命令语法整理" class="headerlink" title="常用 Linux jq命令语法整理"></a>常用 <code>Linux jq</code>命令语法整理</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NoZWF0MTE3MzAxMDI1Ni9hcnRpY2xlL2RldGFpbHMvMTE4MjMwNTYyIzp+OnRleHQ9SlElMjAlRTYlOTglQUYlRTQlQjglODAlRTQlQjglQUElMjAlRTUlOTElQkQlRTQlQkIlQTQlMjAlRTglQTElOEMlRTUlQjclQTUlRTUlODUlQjclRUYlQkMlOEMlRTQlQjglQkIlRTglQTYlODElRTclOTQlQTglRTQlQkElOEUlRTUlQTQlODQlRTclOTAlODZqc29uJUU2JTk2JTg3JUU2JTlDJUFDJUUzJTgwJTgyJTIwJUU4JUFGJUFEJUU2JUIzJTk1LCVFNSVCRSU4OCVFNyVBRSU4MCVFNSU4RCU5NSVFRiVCQyU4QyVFNSVBNiU4MiVFNCVCOCU4QiVFRiVCQyU5QSUyMGpxJTIwJTVCb3B0aW9ucy4uLiU1RCUyMGZpbHRlciUyMCU1QmZpbGVzLi4uJTVE">参考链接</span></p><img data-src="/posts/55b095e0/2022-05-13-20-25-50.png" class=""><img data-src="/posts/55b095e0/2022-05-13-20-26-18.png" class=""><img data-src="/posts/55b095e0/2022-05-13-20-26-42.png" class=""><img data-src="/posts/55b095e0/2022-05-13-20-27-00.png" class=""><h2 id="shell脚本中整数型变量自增（加1）的实现方式"><a href="#shell脚本中整数型变量自增（加1）的实现方式" class="headerlink" title="shell脚本中整数型变量自增（加1）的实现方式"></a><code>shell</code>脚本中整数型变量自增（加<code>1</code>）的实现方式</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">本脚本测试shell脚本中整型变量自增 加1的几种方法</span></span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">定义整型变量</span></span><br><span class="line">a=1</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第一种整型变量自增方式</span></span><br><span class="line">a=$(($a+1))</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第二种整型变量自增方式</span></span><br><span class="line">a=$[$a+1]</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第三种整型变量自增方式</span></span><br><span class="line">a=`expr $a + 1`</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第四种整型变量自增方式</span></span><br><span class="line">let a++</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第五种整型变量自增方式</span></span><br><span class="line">let a+=1</span><br><span class="line">echo $a</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash">第六种整型变量自增方式</span></span><br><span class="line">((a++))</span><br><span class="line">echo $a</span><br></pre></td></tr></table></figure><h2 id="shell判断一个变量是否为空"><a href="#shell判断一个变量是否为空" class="headerlink" title="shell判断一个变量是否为空"></a><code>shell</code>判断一个变量是否为空</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[ ! $a ] &amp;&amp; echo &quot;a is null&quot; </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span> </span><br><span class="line">a= </span><br><span class="line">if [ ! -n &quot;$a&quot; ]; then </span><br><span class="line">echo &quot;IS NULL&quot; </span><br><span class="line">else </span><br><span class="line">echo &quot;NOT NULL&quot; </span><br><span class="line">fi</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span> </span><br><span class="line">a= </span><br><span class="line">if [ ! $a ]; then</span><br><span class="line">echo &quot;IS NULL&quot; </span><br><span class="line">else </span><br><span class="line">echo &quot;NOT NULL&quot; </span><br><span class="line">fi</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span> </span><br><span class="line">a= </span><br><span class="line">if test -z &quot;$a&quot; then </span><br><span class="line">echo &quot;a is not set!&quot; </span><br><span class="line">else </span><br><span class="line">echo &quot;a is set !&quot; </span><br><span class="line">fi</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span> </span><br><span class="line">a= </span><br><span class="line">if [ &quot;$a&quot; = &quot;&quot; ]; then </span><br><span class="line">echo &quot;a is not set!&quot; </span><br><span class="line">else </span><br><span class="line">echo &quot;a is set !&quot; </span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="输出到文件"><a href="#输出到文件" class="headerlink" title="输出到文件"></a>输出到文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">两种方法：</span></span><br><span class="line"><span class="meta">2&gt;</span><span class="bash">&amp;1 | tee mylog.log</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> test.txt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">举例：</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">sh batchjob.sh 2&gt;&amp;1 | tee mylog.log</span><br><span class="line">ls * &gt; test.txt</span><br><span class="line">-------------------------------------------------------------</span><br><span class="line">find ./ -name &quot;*.xml&quot; &gt; result.txt</span><br><span class="line">find ./ -name &quot;*.xml&quot; 2&gt;&amp;1 | tee mylog.log</span><br></pre></td></tr></table></figure><h2 id="Shell-实现多线程（多任务）"><a href="#Shell-实现多线程（多任务）" class="headerlink" title="Shell 实现多线程（多任务）"></a><code>Shell</code> 实现多线程（多任务）</h2><ol><li>命令结尾添加：<code>&amp;</code></li><li>解决主线程提前退出问题，添加 <code>wait</code></li><li>控制后台执行数（线程数），<code>mkfifo</code></li></ol><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vemhlbmdiaW4vcC85NTEzNzYyLmh0bWw=">https://www.cnblogs.com/zhengbin/p/9513762.html</span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Nowdays , i hava a task about how to use shell script ,so it is time to learn shell .&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/jingmoxukong/p/7867397.html&quot;&gt; shell  入门 &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://tool.rbtree.cn/&quot;&gt; 好用的工具网站 &lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Shell" scheme="https://smile1231.github.io/categories/Shell/"/>
    
    
    <category term="Shell" scheme="https://smile1231.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>CEST与北京时间转换表</title>
    <link href="https://smile1231.github.io/posts/ef55dc85/"/>
    <id>https://smile1231.github.io/posts/ef55dc85/</id>
    <published>2022-04-29T13:41:49.000Z</published>
    <updated>2022-04-29T14:08:18.035Z</updated>
    
    <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly9kYXRldGltZTM2MC5jb20vY24vY2V0LWJlaWppbmctdGltZS8=">参考链接</span></p><span id="more"></span><table><thead><tr><th>中欧夏令时间(CEST)</th><th>北京时间(Beijing)</th></tr></thead><tbody><tr><td>00:00</td><td>06:00</td></tr><tr><td>01:00</td><td>07:00</td></tr><tr><td>02:00</td><td>08:00</td></tr><tr><td>03:00</td><td>09:00</td></tr><tr><td>04:00</td><td>10:00</td></tr><tr><td>05:00</td><td>11:00</td></tr><tr><td>06:00</td><td>12:00</td></tr><tr><td>07:00</td><td>13:00</td></tr><tr><td>08:00</td><td>14:00</td></tr><tr><td>09:00</td><td>15:00</td></tr><tr><td>10:00</td><td>16:00</td></tr><tr><td>11:00</td><td>17:00</td></tr><tr><td>12:00</td><td>18:00</td></tr><tr><td>13:00</td><td>19:00</td></tr><tr><td>14:00</td><td>20:00</td></tr><tr><td>15:00</td><td>21:00</td></tr><tr><td>16:00</td><td>22:00</td></tr><tr><td>17:00</td><td>23:00</td></tr><tr><td>18:00</td><td>00:00+1天</td></tr><tr><td>19:00</td><td>01:00+1天</td></tr><tr><td>20:00</td><td>02:00+1天</td></tr><tr><td>21:00</td><td>03:00+1天</td></tr><tr><td>22:00</td><td>04:00+1天</td></tr><tr><td>23:00</td><td>05:00+1天</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://datetime360.com/cn/cet-beijing-time/&quot;&gt;参考链接&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SAP" scheme="https://smile1231.github.io/categories/SAP/"/>
    
    
    <category term="SAP" scheme="https://smile1231.github.io/tags/SAP/"/>
    
  </entry>
  
  <entry>
    <title>simple self introduction</title>
    <link href="https://smile1231.github.io/posts/96b6e8a1/"/>
    <id>https://smile1231.github.io/posts/96b6e8a1/</id>
    <published>2022-04-28T09:33:16.000Z</published>
    <updated>2022-04-29T14:08:18.037Z</updated>
    
    <content type="html"><![CDATA[<p>哈哈，今天要当着印度的同事和德国的同事来介绍自己，初中作文来啦！</p><span id="more"></span><p>这是一次简单的自我介绍</p><p>hello，大家好，我是Team C 最近新入职的同事，Darry，我将会花几分钟时间简单的介绍自己以便你们认识我。首先，我将会打开我的摄像头，这可能和我的ppt中照片有差别，哈哈，可能头发会有一些长并且凌乱，因为我太久没有出门了。 同时呢，很高兴在SAP这个大家庭和大家认识并有机会一起工作，我来自中国的江苏省泰州市，可能是一所不太出名的城市，他是我们前任国家主席的故乡，因此我也感觉很荣幸。 我出生于1997年，我于2016年-2020年就读于  ，目前我正在华东师范大学攻读硕士学位，我本硕所读专业都为计算机科学与技术。在来到SAP之前，我曾在上汽集团的子公司工作了一段时间，主要是做一些关于Java开发相关的工作，由于工作年限并不是很久，所以以后可能会有很多的问题来请教你们，希望不要拒绝我哦。同时呢，也希望自己和大家在SAP都能够愉快的工作，一起提升自己。</p><p>关于我平时呢，特别喜欢打篮球，然后大学期间也是学院篮球队的一员，希望以后也能有机会一起打篮球，此外呢，我也喜欢弹弹吉他，听听音乐，平时也会在朋友圈发一些视频，如果可以的话，大家也可以来我的朋友圈一起听听音乐。接下来，我也愿意分享一下一次比赛的绝杀时刻。</p><p>This is a brief self-introduction</p><p>Hello, everyone, my name is Darry, the newest member of Team C, and I will take a few minutes to briefly introduce myself so you can get to know me. First, I will turn on my camera, which may be different from the photos in my ppt, haha, maybe the hair will be a little long and messy, because I haven’t been out for a long time. At the same time, I am very happy to meet everyone in the SAP family and have the opportunity to work together. I am from Taizhou City, Jiangsu Province, China, which may be a less famous city. He is the hometown of our former president, so I am also I feel honored. I was born in 1997, I studied in 2016-2020 in jiangsu , I am currently studying for a master’s degree at East China Normal University, and my undergraduate and master’s majors are computer science and technology. Before coming to SAP, I worked in SAIC Group for a period of time, mainly doing some work related to Java development. Since my working experience is not long, I may have many questions to ask you in the future. I hope Don’t reject me. At the same time, I also hope that myself and everyone can work happily in SAP and improve themselves together.</p><p>As for me, I especially like playing basketball, and then I was a member of the college basketball team during college. I hope to have the opportunity to play basketball together in the future. Besides, I also like to play the guitar, listen to music, and usually hang out with friends. Circle some videos, if possible, you can also come to my circle of friends to listen to music together. Next, I am also willing to share the lore moment of a game.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;哈哈，今天要当着印度的同事和德国的同事来介绍自己，初中作文来啦！&lt;/p&gt;</summary>
    
    
    
    <category term="SAP" scheme="https://smile1231.github.io/categories/SAP/"/>
    
    
    <category term="SAP" scheme="https://smile1231.github.io/tags/SAP/"/>
    
  </entry>
  
  <entry>
    <title>工作难点</title>
    <link href="https://smile1231.github.io/posts/d0966c4d/"/>
    <id>https://smile1231.github.io/posts/d0966c4d/</id>
    <published>2022-03-24T12:39:16.000Z</published>
    <updated>2022-04-29T14:08:18.039Z</updated>
    
    <content type="html"><![CDATA[<h2 id="索引失效的原因"><a href="#索引失效的原因" class="headerlink" title="索引失效的原因"></a>索引失效的原因</h2><p>发票项目当初查询列表时queryInvoicesForCom接口，该接口主要用来列表发票信息的，当时是因为业务反应前端很久才会有显示，然后当时我来优化</p><p>主要的耗时点是在一条sql上，老sql遗留问题，由于当初在设计t_invoice表的时候，是一条记录进行作用的，所以查询的时候，需要进行拆分 operate，通过状态进行拆分、</p><p>sql语句是 union all </p><p>explain 执行计划下来 type中有all全扫描，应该是没有击中索引，其实常见的未击中索引我都有去考虑过，</p><p>where 中使用 != 或 &lt;&gt; 或 or 或表达式或函数（左侧）<br>like 语句 % 开头<br>字符串未加’’<br>索引字段区分度过低，如性别<br>未匹配最左前缀</p><p>一点点的抽丝剥茧，也问了很多同事，身边的架构师，讲道理来说是会命中索引的，应该是mysql自己优化成不走索引了，线上数据目前是800w左右，时间区间是三个月，数据量过于大的时候，就会不走索引<br>所以这也是急需要优化的点，加上mybatis会查询两次，时间就进行了翻倍，<br>执行计划一条type为ref rows属性达到了100w，所以数据量<br>所以需要删除一些历史遗留的merchantID，以及缩小时间区间看看是否能够优化，因为在测试环境是可以走通的，测试环境的话只有几十万，所以都是没有问题的，最后原因如果数据量过大的话，也不会一定走索引，所以这个时候只能多加限制了。。。。</p><p>各属性含义：<br>id：查询的序列号</p><p>select_type：查询的类型，主要是区别普通查询和联合查询、子查询之类的复杂查询</p><p>SIMPLE：查询中不包含子查询或者UNION<br>查询中若包含任何复杂的子部分，最外层查询则被标记为：PRIMARY<br>在SELECT或WHERE列表中包含了子查询，该子查询被标记为：SUBQUERY<br>table：输出的行所引用的表</p><p>type：访问类型</p><p>从左至右，性能由差到好</p><p>ALL：扫描全表<br>index：扫描全部索引树<br>range：扫描部分索引，索引范围扫描，对索引的扫描开始于某一点，返回匹配值域的行，常见于between、&lt;、&gt;等的查询<br>ref：使用非唯一索引或非唯一索引前缀进行的查找<br>（eq_ref和const的区别：）<br>eq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配。常见于主键或唯一索引扫描<br>const：单表中最多有一个匹配行，查询起来非常迅速，例如根据主键或唯一索引查询。<br>system：system是const类型的特例，当查询的表只有一行的情况下， 使用system。<br>NULL：不用访问表或者索引，直接就能得到结果，如select 1 from test where 1<br>possible_keys：表示查询时可能使用的索引。如果是空的，没有相关的索引。这时要提高性能，可通过检验WHERE子句，看是否引用某些字段，或者检查字段不是适合索引。</p><p>key：显示MySQL实际决定使用的索引。如果没有索引被选择，是NULL</p><p>key_len：使用到索引字段的长度<br>注：key_len显示的值为索引字段的最大可能长度，并非实际使用长度，即key_len是根据表定义计算而得，不是通过表内检索出的。</p><p>ref：显示哪个字段或常数与key一起被使用</p><p>rows：这个数表示mysql要遍历多少数据才能找到，表示MySQL根据表统计信息及索引选用情况，估算的找到所需的记录所需要读取的行数，在innodb上可能是不准确的</p><p>Extra：执行情况的说明和描述。包含不适合在其他列中显示但十分重要的额外信息。</p><p>Using index：表示使用索引，如果只有 Using index，说明他没有查询到数据表，只用索引表就完成了这个查询，这个叫覆盖索引。</p><p>Using where：表示条件查询，如果不读取表的所有数据，或不是仅仅通过索引就可以获取所有需要的数据，则会出现 Using where。</p><p>查询条件中IS NULL，当命中结果数量小于40%的时候，会走索引。</p><p>查询条件中的IS NOT NULL,命中结果数小于30%的时候，会走索引。</p><h2 id="当初对账项目找不到mapper文件的原因（多数据源引起）"><a href="#当初对账项目找不到mapper文件的原因（多数据源引起）" class="headerlink" title="当初对账项目找不到mapper文件的原因（多数据源引起）"></a>当初对账项目找不到mapper文件的原因（多数据源引起）</h2><p>其实这个问题是当初开发日清算的时候有的，其实这个问题是因为多数据源引起的，多数据源primary注解，多数据源时会逐步扫描config包下的config文件，读取config文件时，当时项目的分层出现了严重的问题，不同数据源需要<br>不同的包进行隔离，但是但是主数据源就卸载了dao下，但是另一个副数据源缺新建了包，这个问题呢，很巧的是本地环境不会有问题，开发和测试环境出现过一次但是生产环境就会一直报错。。。</p><h2 id="文件上传前端超时的问题如何解决"><a href="#文件上传前端超时的问题如何解决" class="headerlink" title="文件上传前端超时的问题如何解决"></a>文件上传前端超时的问题如何解决</h2><p>有一个上传的需求需要上传1000个司机，但是由于是同步操作</p><h2 id="在同一个事务中调用服务的另一个方法引起的问题（司机离职）"><a href="#在同一个事务中调用服务的另一个方法引起的问题（司机离职）" class="headerlink" title="在同一个事务中调用服务的另一个方法引起的问题（司机离职）"></a>在同一个事务中调用服务的另一个方法引起的问题（司机离职）</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;索引失效的原因&quot;&gt;&lt;a href=&quot;#索引失效的原因&quot; class=&quot;headerlink&quot; title=&quot;索引失效的原因&quot;&gt;&lt;/a&gt;索引失效的原因&lt;/h2&gt;&lt;p&gt;发票项目当初查询列表时queryInvoicesForCom接口，该接口主要用来列表发票信息的，当时</summary>
      
    
    
    
    
  </entry>
  
</feed>
